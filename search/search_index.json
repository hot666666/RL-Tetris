{"config":{"lang":["ko"],"separator":"[\\s\\-]+","pipeline":[" "],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"RL-Tetris","text":"<p>RL-Tetris\ub294 \uac15\ud654\ud559\uc2b5\uc744 \uc704\ud574 Gymnasium \uc778\ud130\ud398\uc774\uc2a4\ub97c \uae30\ubc18\uc73c\ub85c \uad6c\ud604\ub41c \ud14c\ud2b8\ub9ac\uc2a4 \uac8c\uc784 \ud658\uacbd\uc785\ub2c8\ub2e4.</p> <p></p>"},{"location":"#_1","title":"\uc8fc\uc694 \ud2b9\uc9d5","text":"<ul> <li>Gymnasium \ud638\ud658: \ud45c\uc900\ud654\ub41c \uac15\ud654\ud559\uc2b5 \uc778\ud130\ud398\uc774\uc2a4</li> <li>\ubaa8\ub4c8\ud654\ub41c \uc544\ud0a4\ud14d\ucc98: \uac01 \ucef4\ud3ec\ub10c\ud2b8\uac00 \uba85\ud655\ud558\uac8c \ubd84\ub9ac\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4</li> <li>\ud3ec\uad04\uc801\uc778 \ud14c\uc2a4\ud2b8: 124\uac1c\uc758 \ud14c\uc2a4\ud2b8\ub85c \uc548\uc815\uc131 \ubcf4\uc7a5</li> <li>\ud2b9\uc9d5 \ucd94\ucd9c: ML\uc744 \uc704\ud55c \ub2e4\uc591\ud55c \ubcf4\ub4dc \ud2b9\uc9d5 \ucd94\ucd9c \uae30\ub2a5</li> <li>\uc720\uc5f0\ud55c Wrapper: GroupedWrapper, ObservationWrapper \ub4f1 \uc81c\uacf5</li> </ul>"},{"location":"#_2","title":"\ube60\ub978 \uc2dc\uc791","text":""},{"location":"#_3","title":"\uc124\uce58","text":"<pre><code>pip install rl-tetris\n</code></pre> <p>Python 3.10 \uc774\uc0c1\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.</p>"},{"location":"#_4","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>import gymnasium as gym\nfrom rl_tetris.wrapper.Grouped import GroupedWrapper\nfrom rl_tetris.wrapper.Observation import GroupedFeaturesObservation\n\n# \ud658\uacbd \uc0dd\uc131\nenv = gym.make(\"RL-Tetris-v0\", render_mode=\"human\")\nenv = GroupedWrapper(env, observation_wrapper=GroupedFeaturesObservation(env))\n\n# \uac8c\uc784 \uc2e4\ud589\nobs, info = env.reset()\ndone = False\n\nwhile not done:\n    env.render()\n    action = env.action_space.sample(obs[\"action_mask\"])\n    obs, reward, done, truncated, info = env.step(action)\n</code></pre>"},{"location":"#_5","title":"\uc544\ud0a4\ud14d\ucc98 \uac1c\uc694","text":"<p>RL-Tetris\ub294 \ub2e8\uc77c \ucc45\uc784 \uc6d0\uce59(SRP)\uc744 \ub530\ub974\ub294 \ubaa8\ub4c8\ud654\ub41c \uc544\ud0a4\ud14d\ucc98\ub85c \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4:</p> <pre><code>graph TB\n    subgraph \"Core Components\"\n        Board[Board&lt;br/&gt;\ubcf4\ub4dc \uc0c1\ud0dc \uad00\ub9ac]\n        Piece[Piece&lt;br/&gt;\ud53c\uc2a4 \ud615\ud0dc/\ud68c\uc804]\n        Game[Game&lt;br/&gt;\uac8c\uc784 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158]\n    end\n\n    subgraph \"Features\"\n        Feature[BoardFeatureExtractor&lt;br/&gt;\ud2b9\uc9d5 \ucd94\ucd9c]\n    end\n\n    subgraph \"Environment\"\n        Tetris[Tetris Environment&lt;br/&gt;Gymnasium \uc778\ud130\ud398\uc774\uc2a4]\n    end\n\n    Tetris --&gt; Game\n    Tetris --&gt; Board\n    Game --&gt; Board\n    Game --&gt; Piece\n    Feature --&gt; Board\n\n    style Board fill:#2196F3\n    style Piece fill:#2196F3\n    style Game fill:#2196F3\n    style Feature fill:#FF9800\n    style Tetris fill:#4CAF50</code></pre> <p>\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 Architecture \uc139\uc158\uc744 \ucc38\uc870\ud558\uc138\uc694.</p>"},{"location":"#_6","title":"\ubb38\uc11c \uad6c\uc870","text":"<ul> <li>Getting Started: \uc124\uce58 \ubc0f \uc2dc\uc791 \uac00\uc774\ub4dc</li> <li>Architecture: \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870 \ubc0f \uc124\uacc4 \uc6d0\uce59</li> <li>API Reference: \uc790\uc138\ud55c API \ubb38\uc11c</li> <li>Contributing: \uae30\uc5ec \uac00\uc774\ub4dc</li> </ul>"},{"location":"#_7","title":"\ub77c\uc774\uc13c\uc2a4","text":"<p>MIT License</p>"},{"location":"contributing/","title":"Contributing","text":"<p>RL-Tetris \ud504\ub85c\uc81d\ud2b8\uc5d0 \uae30\uc5ec\ud574\uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4! \uc774 \uac00\uc774\ub4dc\ub294 \ud504\ub85c\uc81d\ud2b8\uc5d0 \uae30\uc5ec\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.</p>"},{"location":"contributing/#getting-started","title":"Getting Started","text":""},{"location":"contributing/#1-fork-and-clone","title":"1. Fork and Clone","text":"<pre><code># \uc800\uc7a5\uc18c Fork (GitHub\uc5d0\uc11c)\n# \uadf8 \ub2e4\uc74c \ud074\ub860\ngit clone https://github.com/YOUR_USERNAME/RL-Tetris.git\ncd RL-Tetris\n</code></pre>"},{"location":"contributing/#2-install-dependencies","title":"2. Install Dependencies","text":"<pre><code># Poetry \uc124\uce58\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# \uc758\uc874\uc131 \uc124\uce58 (\uac1c\ubc1c \uc758\uc874\uc131 \ud3ec\ud568)\npoetry install --with dev --with docs\n\n# \uac00\uc0c1\ud658\uacbd \ud65c\uc131\ud654\npoetry shell\n</code></pre>"},{"location":"contributing/#3-create-a-branch","title":"3. Create a Branch","text":"<pre><code>git checkout -b feature/your-feature-name\n# \ub610\ub294\ngit checkout -b fix/your-bug-fix\n</code></pre>"},{"location":"contributing/#development-workflow","title":"Development Workflow","text":""},{"location":"contributing/#running-tests","title":"Running Tests","text":"<p>\ud14c\uc2a4\ud2b8\ub294 \ud544\uc218\uc785\ub2c8\ub2e4. \ubaa8\ub4e0 \uae30\uc5ec\ub294 \ud14c\uc2a4\ud2b8\ub97c \ud1b5\uacfc\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code># \ubaa8\ub4e0 \ud14c\uc2a4\ud2b8 \uc2e4\ud589\npytest tests/ -v\n\n# \ud2b9\uc815 \ud30c\uc77c \ud14c\uc2a4\ud2b8\npytest tests/test_board.py -v\n\n# \ucee4\ubc84\ub9ac\uc9c0 \ud3ec\ud568\npytest tests/ --cov=rl_tetris --cov-report=html\n</code></pre>"},{"location":"contributing/#writing-tests","title":"Writing Tests","text":"<p>\uc0c8\ub85c\uc6b4 \uae30\ub2a5\uc744 \ucd94\uac00\ud560 \ub54c\ub294 \ubc18\ub4dc\uc2dc \ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\uc138\uc694:</p> <pre><code># tests/test_your_feature.py\nimport pytest\nfrom rl_tetris.your_module import YourClass\n\ndef test_your_feature():\n    \"\"\"Test description\"\"\"\n    obj = YourClass()\n    result = obj.your_method()\n    assert result == expected_value\n\ndef test_edge_case():\n    \"\"\"Test edge case\"\"\"\n    # ...\n</code></pre>"},{"location":"contributing/#code-style","title":"Code Style","text":"<ul> <li>Google Style Docstrings \uc0ac\uc6a9</li> <li>Type Hints \ucd94\uac00</li> <li>\uba85\ud655\ud55c \ubcc0\uc218\uba85 \uc0ac\uc6a9</li> </ul> <p>\uc608\uc2dc:</p> <pre><code>def calculate_reward(self, lines_cleared: int, overflow: bool) -&gt; int:\n    \"\"\"\n    Calculate the reward for the current action.\n\n    Args:\n        lines_cleared: Number of lines cleared.\n        overflow: Whether the game is over due to overflow.\n\n    Returns:\n        The calculated reward value.\n\n    Examples:\n        &gt;&gt;&gt; game.calculate_reward(lines_cleared=2, overflow=False)\n        4\n    \"\"\"\n    if overflow:\n        return -10\n    return lines_cleared ** 2\n</code></pre>"},{"location":"contributing/#documentation","title":"Documentation","text":"<p>\ucf54\ub4dc\uc5d0 docstring\uc744 \ucd94\uac00\ud558\uc138\uc694:</p> <pre><code>class YourClass:\n    \"\"\"\n    Brief description of the class.\n\n    This class does X, Y, and Z. It is used for...\n\n    Attributes:\n        attr1: Description of attr1.\n        attr2: Description of attr2.\n\n    Examples:\n        &gt;&gt;&gt; obj = YourClass(param=value)\n        &gt;&gt;&gt; obj.method()\n        result\n    \"\"\"\n\n    def __init__(self, param: int):\n        \"\"\"\n        Initialize the class.\n\n        Args:\n            param: Description of parameter.\n        \"\"\"\n        self.attr1 = param\n</code></pre>"},{"location":"contributing/#building-documentation","title":"Building Documentation","text":"<p>\ub85c\uceec\uc5d0\uc11c \ubb38\uc11c\ub97c \ube4c\ub4dc\ud558\uace0 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code># \ubb38\uc11c \ube4c\ub4dc\nmkdocs build\n\n# \ub85c\uceec \uc11c\ubc84\uc5d0\uc11c \ubb38\uc11c \ubbf8\ub9ac\ubcf4\uae30\nmkdocs serve\n# http://127.0.0.1:8000 \uc5d0\uc11c \ud655\uc778\n</code></pre>"},{"location":"contributing/#contribution-guidelines","title":"Contribution Guidelines","text":""},{"location":"contributing/#what-to-contribute","title":"What to Contribute","text":"<p>\ud658\uc601\ud558\ub294 \uae30\uc5ec:</p> <ul> <li>\ubc84\uadf8 \uc218\uc815: \uc774\uc288 \uc0dd\uc131 \ud6c4 PR</li> <li>\uc0c8\ub85c\uc6b4 \uae30\ub2a5: \uba3c\uc800 \uc774\uc288\uc5d0\uc11c \ub17c\uc758</li> <li>\ud14c\uc2a4\ud2b8 \ucd94\uac00: \ucee4\ubc84\ub9ac\uc9c0 \uac1c\uc120</li> <li>\ubb38\uc11c \uac1c\uc120: \uc624\ud0c0 \uc218\uc815, \uc608\uc81c \ucd94\uac00</li> <li>\uc131\ub2a5 \uac1c\uc120: \ubca4\uce58\ub9c8\ud06c \ud3ec\ud568</li> </ul>"},{"location":"contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>\uc774\uc288 \uc0dd\uc131: \ud070 \ubcc0\uacbd\uc0ac\ud56d\uc740 \uba3c\uc800 \uc774\uc288\uc5d0\uc11c \ub17c\uc758</li> <li>\ud14c\uc2a4\ud2b8 \uc791\uc131: \ubaa8\ub4e0 \uc0c8 \ucf54\ub4dc\uc5d0 \ud14c\uc2a4\ud2b8 \ucd94\uac00</li> <li>\ud14c\uc2a4\ud2b8 \ud1b5\uacfc: \ub85c\uceec\uc5d0\uc11c \ubaa8\ub4e0 \ud14c\uc2a4\ud2b8 \ud655\uc778</li> <li>\ubb38\uc11c \uc5c5\ub370\uc774\ud2b8: README, docstring \uc5c5\ub370\uc774\ud2b8</li> <li>\ucee4\ubc0b \uba54\uc2dc\uc9c0: \uba85\ud655\ud558\uace0 \uc124\uba85\uc801\uc778 \uba54\uc2dc\uc9c0</li> <li>PR \uc0dd\uc131: \ubcc0\uacbd\uc0ac\ud56d \uc124\uba85 \ud3ec\ud568</li> </ol>"},{"location":"contributing/#commit-message-format","title":"Commit Message Format","text":"<pre><code>&lt;type&gt;: &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre> <p>Types: - <code>feat</code>: \uc0c8\ub85c\uc6b4 \uae30\ub2a5 - <code>fix</code>: \ubc84\uadf8 \uc218\uc815 - <code>docs</code>: \ubb38\uc11c \ubcc0\uacbd - <code>test</code>: \ud14c\uc2a4\ud2b8 \ucd94\uac00/\uc218\uc815 - <code>refactor</code>: \ucf54\ub4dc \ub9ac\ud329\ud1a0\ub9c1 - <code>perf</code>: \uc131\ub2a5 \uac1c\uc120 - <code>ci</code>: CI \uc124\uc815 \ubcc0\uacbd</p> <p>\uc608\uc2dc: <pre><code>feat: Add advanced feature extractor\n\n- Added AdvancedFeatureExtractor class\n- Includes weighted holes, wells, transitions\n- Added comprehensive tests\n\nCloses #123\n</code></pre></p>"},{"location":"contributing/#testing-guidelines","title":"Testing Guidelines","text":""},{"location":"contributing/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 test_board.py       # Board \ud074\ub798\uc2a4 \ud14c\uc2a4\ud2b8\n\u251c\u2500\u2500 test_piece.py       # Piece \ud074\ub798\uc2a4 \ud14c\uc2a4\ud2b8\n\u251c\u2500\u2500 test_game.py        # Game \ud074\ub798\uc2a4 \ud14c\uc2a4\ud2b8\n\u251c\u2500\u2500 test_integration.py # \ud1b5\ud569 \ud14c\uc2a4\ud2b8\n\u2514\u2500\u2500 conftest.py         # Pytest fixtures\n</code></pre>"},{"location":"contributing/#test-coverage","title":"Test Coverage","text":"<ul> <li>\ucd5c\uc18c \ucee4\ubc84\ub9ac\uc9c0: 80% \uc774\uc0c1</li> <li>\ubaa8\ub4e0 \uacf5\uac1c \uba54\uc11c\ub4dc: \ud14c\uc2a4\ud2b8 \ud544\uc218</li> <li>\uc5e3\uc9c0 \ucf00\uc774\uc2a4: \uacbd\uacc4 \uc870\uac74 \ud14c\uc2a4\ud2b8</li> <li>\uc5d0\ub7ec \ucc98\ub9ac: \uc608\uc678 \uc0c1\ud669 \ud14c\uc2a4\ud2b8</li> </ul>"},{"location":"contributing/#example-test","title":"Example Test","text":"<pre><code>import pytest\nfrom rl_tetris.core import Board, Piece\n\n@pytest.fixture\ndef board():\n    \"\"\"Fixture for creating a fresh board\"\"\"\n    return Board(height=20, width=10)\n\ndef test_place_piece_basic(board):\n    \"\"\"Test basic piece placement\"\"\"\n    piece = Piece(piece_type=0)\n    board.place_piece(piece, x=5, y=18)\n\n    state = board.get_state()\n    assert state[18][5] != 0\n\ndef test_collision_detection(board):\n    \"\"\"Test collision detection at boundaries\"\"\"\n    piece = Piece(piece_type=0)\n\n    # Bottom boundary\n    assert board.check_collision(piece, x=5, y=20)\n\n    # Left boundary\n    assert board.check_collision(piece, x=-1, y=10)\n\n    # Right boundary\n    assert board.check_collision(piece, x=10, y=10)\n</code></pre>"},{"location":"contributing/#code-review","title":"Code Review","text":"<p>\ubaa8\ub4e0 PR\uc740 \ucf54\ub4dc \ub9ac\ubdf0\ub97c \uac70\uce69\ub2c8\ub2e4:</p> <ul> <li>\uba85\ud655\uc131: \ucf54\ub4dc\uac00 \uc77d\uae30 \uc26c\uc6b4\uac00?</li> <li>\ud14c\uc2a4\ud2b8: \ucda9\ubd84\ud55c \ud14c\uc2a4\ud2b8\uac00 \uc788\ub294\uac00?</li> <li>\ubb38\uc11c: docstring\uc774 \uc788\ub294\uac00?</li> <li>\uc131\ub2a5: \ubd88\ud544\uc694\ud55c \uc5f0\uc0b0\uc774 \uc5c6\ub294\uac00?</li> <li>\ud638\ud658\uc131: \uae30\uc874 API\ub97c \uae68\ub728\ub9ac\uc9c0 \uc54a\ub294\uac00?</li> </ul>"},{"location":"contributing/#questions","title":"Questions?","text":"<ul> <li>Issues: GitHub Issues</li> <li>Discussions: GitHub Discussions</li> </ul> <p>\uac10\uc0ac\ud569\ub2c8\ub2e4!</p>"},{"location":"license/","title":"License","text":"<p>RL-Tetris is released under the MIT License.</p>"},{"location":"license/#mit-license","title":"MIT License","text":"<pre><code>MIT License\n\nCopyright (c) 2024 hot666666\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n</code></pre>"},{"location":"license/#what-this-means","title":"What This Means","text":""},{"location":"license/#you-can","title":"You Can","text":"<ul> <li>\u2705 Use the software for commercial purposes</li> <li>\u2705 Modify the software</li> <li>\u2705 Distribute the software</li> <li>\u2705 Use the software privately</li> <li>\u2705 Sublicense the software</li> </ul>"},{"location":"license/#you-must","title":"You Must","text":"<ul> <li>\u26a0\ufe0f Include the original license and copyright notice</li> <li>\u26a0\ufe0f State any significant changes made</li> </ul>"},{"location":"license/#you-cannot","title":"You Cannot","text":"<ul> <li>\u274c Hold the author liable</li> <li>\u274c Use the author's name to promote your product</li> </ul>"},{"location":"license/#third-party-licenses","title":"Third-Party Licenses","text":"<p>This project depends on the following open-source software:</p>"},{"location":"license/#runtime-dependencies","title":"Runtime Dependencies","text":"<ul> <li>NumPy - BSD 3-Clause License</li> <li>OpenCV - Apache 2.0 License</li> <li>Gymnasium - MIT License</li> </ul>"},{"location":"license/#development-dependencies","title":"Development Dependencies","text":"<ul> <li>pytest - MIT License</li> <li>MkDocs - BSD 2-Clause License</li> <li>Material for MkDocs - MIT License</li> </ul>"},{"location":"license/#contributing","title":"Contributing","text":"<p>By contributing to RL-Tetris, you agree that your contributions will be licensed under the MIT License.</p> <p>See Contributing Guide for more information.</p>"},{"location":"license/#contact","title":"Contact","text":"<p>For questions about licensing, please open an issue on GitHub.</p>"},{"location":"api/core/board/","title":"Board","text":"<p>Board \ud074\ub798\uc2a4\ub294 \ud14c\ud2b8\ub9ac\uc2a4 \uac8c\uc784 \ubcf4\ub4dc\uc758 \uc0c1\ud0dc\ub97c \uad00\ub9ac\ud558\uace0, \ucda9\ub3cc \uac10\uc9c0, \uc904 \ud074\ub9ac\uc5b4, \ud2b9\uc9d5 \uacc4\uc0b0 \ub4f1\uc758 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"api/core/board/#api-reference","title":"API Reference","text":""},{"location":"api/core/board/#rl_tetris.core.board.Board","title":"Board","text":"<pre><code>Board(height: int = 20, width: int = 10)\n</code></pre> <p>Manages the Tetris game board state and operations.</p> <p>Responsibilities: - Board state management (initialization, copying) - Collision detection - Line clearing - Feature extraction (holes, bumpiness, height)</p> <p>Initialize a new board.</p> <p>Parameters:</p> Name Type Description Default <code>height</code> <code>int</code> <p>Number of rows in the board</p> <code>20</code> <code>width</code> <code>int</code> <p>Number of columns in the board</p> <code>10</code> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def __init__(self, height: int = 20, width: int = 10):\n    \"\"\"\n    Initialize a new board.\n\n    Args:\n        height: Number of rows in the board\n        width: Number of columns in the board\n    \"\"\"\n    self.height = height\n    self.width = width\n    self._state = None\n    self.reset()\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> <p>Reset the board to an empty state.</p> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def reset(self) -&gt; None:\n    \"\"\"Reset the board to an empty state.\"\"\"\n    self._state = [[0] * self.width for _ in range(self.height)]\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.get_state","title":"get_state","text":"<pre><code>get_state() -&gt; List[List[int]]\n</code></pre> <p>Get a copy of the current board state.</p> <p>Returns:</p> Type Description <code>List[List[int]]</code> <p>A deep copy of the board state</p> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def get_state(self) -&gt; List[List[int]]:\n    \"\"\"\n    Get a copy of the current board state.\n\n    Returns:\n        A deep copy of the board state\n    \"\"\"\n    return [row[:] for row in self._state]\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.set_state","title":"set_state","text":"<pre><code>set_state(state: List[List[int]]) -&gt; None\n</code></pre> <p>Set the board state.</p> <p>Parameters:</p> Name Type Description Default <code>state</code> <code>List[List[int]]</code> <p>The new board state</p> required Source code in <code>rl_tetris/core/board.py</code> <pre><code>def set_state(self, state: List[List[int]]) -&gt; None:\n    \"\"\"\n    Set the board state.\n\n    Args:\n        state: The new board state\n    \"\"\"\n    if len(state) != self.height or any(len(row) != self.width for row in state):\n        raise ValueError(f\"Invalid board state dimensions. Expected {self.height}x{self.width}\")\n    self._state = [row[:] for row in state]\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.check_collision","title":"check_collision","text":"<pre><code>check_collision(piece_shape: List[List[int]], x: int, y: int) -&gt; bool\n</code></pre> <p>Check if placing a piece at the given position would cause a collision.</p> <p>Parameters:</p> Name Type Description Default <code>piece_shape</code> <code>List[List[int]]</code> <p>2D array representing the piece shape</p> required <code>x</code> <code>int</code> <p>Column position of the piece's top-left corner</p> required <code>y</code> <code>int</code> <p>Row position of the piece's top-left corner</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if collision occurs, False otherwise</p> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def check_collision(self, piece_shape: List[List[int]], x: int, y: int) -&gt; bool:\n    \"\"\"\n    Check if placing a piece at the given position would cause a collision.\n\n    Args:\n        piece_shape: 2D array representing the piece shape\n        x: Column position of the piece's top-left corner\n        y: Row position of the piece's top-left corner\n\n    Returns:\n        True if collision occurs, False otherwise\n    \"\"\"\n    for py in range(len(piece_shape)):\n        for px in range(len(piece_shape[py])):\n            # Skip empty cells in the piece\n            if piece_shape[py][px] == 0:\n                continue\n\n            board_x = x + px\n            board_y = y + py\n\n            # Check boundaries\n            if not self.is_valid_position(board_x, board_y):\n                return True\n\n            # Check if cell is already occupied\n            if self._state[board_y][board_x] &gt; 0:\n                return True\n\n    return False\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.place_piece","title":"place_piece","text":"<pre><code>place_piece(piece_shape: List[List[int]], x: int, y: int) -&gt; None\n</code></pre> <p>Place a piece on the board (modifies board state).</p> <p>Parameters:</p> Name Type Description Default <code>piece_shape</code> <code>List[List[int]]</code> <p>2D array representing the piece shape</p> required <code>x</code> <code>int</code> <p>Column position of the piece's top-left corner</p> required <code>y</code> <code>int</code> <p>Row position of the piece's top-left corner</p> required Source code in <code>rl_tetris/core/board.py</code> <pre><code>def place_piece(self, piece_shape: List[List[int]], x: int, y: int) -&gt; None:\n    \"\"\"\n    Place a piece on the board (modifies board state).\n\n    Args:\n        piece_shape: 2D array representing the piece shape\n        x: Column position of the piece's top-left corner\n        y: Row position of the piece's top-left corner\n    \"\"\"\n    for py in range(len(piece_shape)):\n        for px in range(len(piece_shape[py])):\n            if piece_shape[py][px] &gt; 0:\n                board_y = y + py\n                board_x = x + px\n                if self.is_valid_position(board_x, board_y):\n                    if self._state[board_y][board_x] == 0:\n                        self._state[board_y][board_x] = piece_shape[py][px]\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.clear_full_rows","title":"clear_full_rows","text":"<pre><code>clear_full_rows() -&gt; int\n</code></pre> <p>Clear all full rows from the board and return the number cleared.</p> <p>Returns:</p> Type Description <code>int</code> <p>Number of rows cleared</p> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def clear_full_rows(self) -&gt; int:\n    \"\"\"\n    Clear all full rows from the board and return the number cleared.\n\n    Returns:\n        Number of rows cleared\n    \"\"\"\n    rows_to_delete = []\n    for i, row in enumerate(self._state):\n        if 0 not in row:\n            rows_to_delete.append(i)\n\n    if rows_to_delete:\n        self._remove_rows(rows_to_delete)\n\n    return len(rows_to_delete)\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.get_holes","title":"get_holes","text":"<pre><code>get_holes() -&gt; int\n</code></pre> <p>Count the number of holes in the board. A hole is an empty cell with at least one filled cell above it.</p> <p>Returns:</p> Type Description <code>int</code> <p>Number of holes</p> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def get_holes(self) -&gt; int:\n    \"\"\"\n    Count the number of holes in the board.\n    A hole is an empty cell with at least one filled cell above it.\n\n    Returns:\n        Number of holes\n    \"\"\"\n    num_holes = 0\n    for col_idx in range(self.width):\n        # Find first filled cell in column\n        row = 0\n        while row &lt; self.height and self._state[row][col_idx] == 0:\n            row += 1\n\n        # Count empty cells below first filled cell\n        for check_row in range(row + 1, self.height):\n            if self._state[check_row][col_idx] == 0:\n                num_holes += 1\n\n    return num_holes\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.get_bumpiness_and_height","title":"get_bumpiness_and_height","text":"<pre><code>get_bumpiness_and_height() -&gt; Tuple[int, int]\n</code></pre> <p>Calculate the bumpiness and total height of the board.</p> <p>Bumpiness is the sum of absolute differences between adjacent column heights. Total height is the sum of all column heights.</p> <p>Returns:</p> Type Description <code>Tuple[int, int]</code> <p>Tuple of (bumpiness, total_height)</p> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def get_bumpiness_and_height(self) -&gt; Tuple[int, int]:\n    \"\"\"\n    Calculate the bumpiness and total height of the board.\n\n    Bumpiness is the sum of absolute differences between adjacent column heights.\n    Total height is the sum of all column heights.\n\n    Returns:\n        Tuple of (bumpiness, total_height)\n    \"\"\"\n    board_array = np.array(self._state)\n    mask = board_array != 0\n\n    # Calculate height of each column\n    # If column has any filled cell, height = height - first_filled_row\n    # Otherwise height = 0\n    invert_heights = np.where(\n        mask.any(axis=0),\n        np.argmax(mask, axis=0),\n        self.height\n    )\n    heights = self.height - invert_heights\n\n    total_height = np.sum(heights)\n\n    # Calculate bumpiness (sum of absolute height differences)\n    if len(heights) &gt; 1:\n        diffs = np.abs(heights[:-1] - heights[1:])\n        total_bumpiness = np.sum(diffs)\n    else:\n        total_bumpiness = 0\n\n    return int(total_bumpiness), int(total_height)\n</code></pre>"},{"location":"api/core/board/#rl_tetris.core.board.Board.get_column_heights","title":"get_column_heights","text":"<pre><code>get_column_heights() -&gt; List[int]\n</code></pre> <p>Get the height of each column.</p> <p>Returns:</p> Type Description <code>List[int]</code> <p>List of column heights</p> Source code in <code>rl_tetris/core/board.py</code> <pre><code>def get_column_heights(self) -&gt; List[int]:\n    \"\"\"\n    Get the height of each column.\n\n    Returns:\n        List of column heights\n    \"\"\"\n    board_array = np.array(self._state)\n    mask = board_array != 0\n    invert_heights = np.where(\n        mask.any(axis=0),\n        np.argmax(mask, axis=0),\n        self.height\n    )\n    heights = self.height - invert_heights\n    return heights.tolist()\n</code></pre>"},{"location":"api/core/board/#usage-examples","title":"Usage Examples","text":""},{"location":"api/core/board/#_1","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>from rl_tetris.core import Board, Piece\n\n# \ubcf4\ub4dc \uc0dd\uc131 (20x10)\nboard = Board(height=20, width=10)\nboard.reset()\n\n# \ud53c\uc2a4 \uc0dd\uc131\npiece = Piece(piece_type=0)  # I \ud53c\uc2a4\n\n# \ucda9\ub3cc \uac80\uc0ac\ncan_place = not board.check_collision(piece, x=5, y=18)\nif can_place:\n    board.place_piece(piece, x=5, y=18)\n\n# \uc904 \ud074\ub9ac\uc5b4\nlines_cleared = board.clear_full_rows()\nprint(f\"Cleared {lines_cleared} lines\")\n</code></pre>"},{"location":"api/core/board/#_2","title":"\ud2b9\uc9d5 \ucd94\ucd9c","text":"<pre><code># \ubcf4\ub4dc \ud2b9\uc9d5 \uacc4\uc0b0\nholes = board.get_holes()\nbumpiness, height = board.get_bumpiness_and_height()\nheights = board.get_column_heights()\n\nprint(f\"Holes: {holes}\")\nprint(f\"Bumpiness: {bumpiness}\")\nprint(f\"Total Height: {height}\")\nprint(f\"Column Heights: {heights}\")\n</code></pre>"},{"location":"api/core/board/#_3","title":"\uc0c1\ud0dc \uad00\ub9ac","text":"<pre><code># \uc0c1\ud0dc \uc800\uc7a5/\ubcf5\uc6d0\nsaved_state = board.get_state()\n# ... \uac8c\uc784 \uc9c4\ud589 ...\nboard.set_state(saved_state)  # \uc774\uc804 \uc0c1\ud0dc\ub85c \ubcf5\uc6d0\n</code></pre>"},{"location":"api/core/board/#see-also","title":"See Also","text":"<ul> <li>Piece - \ud53c\uc2a4 \uad00\ub9ac</li> <li>Game - \uac8c\uc784 \ub85c\uc9c1</li> <li>BoardFeatureExtractor - \ud2b9\uc9d5 \ucd94\ucd9c</li> </ul>"},{"location":"api/core/game/","title":"Game","text":"<p>Game \ud074\ub798\uc2a4\ub294 \ud14c\ud2b8\ub9ac\uc2a4 \uac8c\uc784\uc758 \uc804\uccb4 \ud750\ub984\uc744 \uc81c\uc5b4\ud558\uace0, \uc2a4\ucf54\uc5b4\ub9c1, \ud53c\uc2a4 \uc2a4\ud3f0, \uac8c\uc784 \uc624\ubc84 \ucc98\ub9ac\ub97c \ub2f4\ub2f9\ud569\ub2c8\ub2e4.</p>"},{"location":"api/core/game/#api-reference","title":"API Reference","text":""},{"location":"api/core/game/#rl_tetris.core.game.Game","title":"Game","text":"<pre><code>Game(board: Board, queue: TetrominoQueue, initial_position: str = 'center')\n</code></pre> <p>Manages Tetris game logic and orchestration.</p> <p>Responsibilities: - Game state management (score, lines cleared, game over) - Piece spawning and movement - Reward calculation - Game flow orchestration</p> <p>Initialize a new game.</p> <p>Parameters:</p> Name Type Description Default <code>board</code> <code>Board</code> <p>Board instance to use</p> required <code>queue</code> <code>TetrominoQueue</code> <p>TetrominoQueue instance for piece generation</p> required <code>initial_position</code> <code>str</code> <p>How to position new pieces (\"center\" or \"left\")</p> <code>'center'</code> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def __init__(\n    self,\n    board: Board,\n    queue: TetrominoQueue,\n    initial_position: str = \"center\"\n):\n    \"\"\"\n    Initialize a new game.\n\n    Args:\n        board: Board instance to use\n        queue: TetrominoQueue instance for piece generation\n        initial_position: How to position new pieces (\"center\" or \"left\")\n    \"\"\"\n    self.board = board\n    self.queue = queue\n    self.initial_position = initial_position\n\n    self.current_piece: Optional[Piece] = None\n    self.score = 0\n    self.cleared_lines = 0\n    self.gameover = False\n</code></pre>"},{"location":"api/core/game/#rl_tetris.core.game.Game.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> <p>Reset the game to initial state.</p> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def reset(self) -&gt; None:\n    \"\"\"Reset the game to initial state.\"\"\"\n    self.board.reset()\n    self.queue.reset()\n    self.score = 0\n    self.cleared_lines = 0\n    self.gameover = False\n    self.spawn_piece()\n</code></pre>"},{"location":"api/core/game/#rl_tetris.core.game.Game.spawn_piece","title":"spawn_piece","text":"<pre><code>spawn_piece() -&gt; bool\n</code></pre> <p>Spawn a new piece at the top of the board.</p> <p>Returns:</p> Type Description <code>bool</code> <p>True if piece was spawned successfully, False if game over</p> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def spawn_piece(self) -&gt; bool:\n    \"\"\"\n    Spawn a new piece at the top of the board.\n\n    Returns:\n        True if piece was spawned successfully, False if game over\n    \"\"\"\n    piece_type = self.queue.pop()\n    x, y = self._calculate_spawn_position(piece_type)\n\n    self.current_piece = Piece(piece_type, x, y)\n\n    # Check if the new piece collides immediately (game over condition)\n    if self.board.check_collision(self.current_piece.shape, x, y):\n        self.gameover = True\n        return False\n\n    return True\n</code></pre>"},{"location":"api/core/game/#rl_tetris.core.game.Game.move_piece","title":"move_piece","text":"<pre><code>move_piece(dx: int, dy: int) -&gt; bool\n</code></pre> <p>Move the current piece by the given offset if valid.</p> <p>Parameters:</p> Name Type Description Default <code>dx</code> <code>int</code> <p>Change in x position</p> required <code>dy</code> <code>int</code> <p>Change in y position</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if move was successful, False otherwise</p> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def move_piece(self, dx: int, dy: int) -&gt; bool:\n    \"\"\"\n    Move the current piece by the given offset if valid.\n\n    Args:\n        dx: Change in x position\n        dy: Change in y position\n\n    Returns:\n        True if move was successful, False otherwise\n    \"\"\"\n    if self.can_move(dx, dy):\n        self.current_piece.move(dx, dy)\n        return True\n    return False\n</code></pre>"},{"location":"api/core/game/#rl_tetris.core.game.Game.rotate_piece","title":"rotate_piece","text":"<pre><code>rotate_piece() -&gt; bool\n</code></pre> <p>Rotate the current piece clockwise if valid.</p> <p>Returns:</p> Type Description <code>bool</code> <p>True if rotation was successful, False otherwise</p> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def rotate_piece(self) -&gt; bool:\n    \"\"\"\n    Rotate the current piece clockwise if valid.\n\n    Returns:\n        True if rotation was successful, False otherwise\n    \"\"\"\n    if self.can_rotate():\n        self.current_piece.rotate_clockwise()\n        return True\n    return False\n</code></pre>"},{"location":"api/core/game/#rl_tetris.core.game.Game.hard_drop","title":"hard_drop","text":"<pre><code>hard_drop() -&gt; int\n</code></pre> <p>Drop the current piece to the lowest valid position.</p> <p>Returns:</p> Type Description <code>int</code> <p>Number of cells the piece dropped</p> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def hard_drop(self) -&gt; int:\n    \"\"\"\n    Drop the current piece to the lowest valid position.\n\n    Returns:\n        Number of cells the piece dropped\n    \"\"\"\n    if not self.current_piece:\n        return 0\n\n    drop_distance = 0\n    while self.can_move(0, 1):\n        self.current_piece.move(0, 1)\n        drop_distance += 1\n\n    return drop_distance\n</code></pre>"},{"location":"api/core/game/#rl_tetris.core.game.Game.lock_piece","title":"lock_piece","text":"<pre><code>lock_piece() -&gt; Tuple[int, bool]\n</code></pre> <p>Lock the current piece to the board and handle line clearing.</p> <p>Returns:</p> Type Description <code>Tuple[int, bool]</code> <p>Tuple of (lines_cleared, is_game_over)</p> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def lock_piece(self) -&gt; Tuple[int, bool]:\n    \"\"\"\n    Lock the current piece to the board and handle line clearing.\n\n    Returns:\n        Tuple of (lines_cleared, is_game_over)\n    \"\"\"\n    if not self.current_piece:\n        return 0, True\n\n    # Check if piece is overflowing the top (game over condition)\n    is_overflow = self._is_piece_overflowing()\n\n    # Place the piece on the board\n    self.board.place_piece(\n        self.current_piece.shape,\n        self.current_piece.x,\n        self.current_piece.y\n    )\n\n    # Clear full rows\n    lines_cleared = self.board.clear_full_rows()\n    self.cleared_lines += lines_cleared\n\n    # Calculate and add reward\n    reward = self.calculate_reward(lines_cleared, is_overflow)\n    self.score += reward\n\n    if is_overflow:\n        self.gameover = True\n        return lines_cleared, True\n\n    # Spawn next piece\n    success = self.spawn_piece()\n    return lines_cleared, not success\n</code></pre>"},{"location":"api/core/game/#rl_tetris.core.game.Game.calculate_reward","title":"calculate_reward","text":"<pre><code>calculate_reward(lines_cleared: int, is_overflow: bool = False) -&gt; int\n</code></pre> <p>Calculate reward based on lines cleared and game state.</p> <p>Parameters:</p> Name Type Description Default <code>lines_cleared</code> <code>int</code> <p>Number of lines cleared</p> required <code>is_overflow</code> <code>bool</code> <p>Whether the piece caused overflow (game over)</p> <code>False</code> <p>Returns:</p> Type Description <code>int</code> <p>Reward value</p> Source code in <code>rl_tetris/core/game.py</code> <pre><code>def calculate_reward(self, lines_cleared: int, is_overflow: bool = False) -&gt; int:\n    \"\"\"\n    Calculate reward based on lines cleared and game state.\n\n    Args:\n        lines_cleared: Number of lines cleared\n        is_overflow: Whether the piece caused overflow (game over)\n\n    Returns:\n        Reward value\n    \"\"\"\n    base_reward = 1 + (lines_cleared ** 2) * self.board.width\n\n    if is_overflow:\n        return base_reward - 5\n\n    return base_reward\n</code></pre>"},{"location":"api/core/game/#usage-examples","title":"Usage Examples","text":""},{"location":"api/core/game/#_1","title":"\uac8c\uc784 \uc2dc\uc791","text":"<pre><code>from rl_tetris.core import Board, Game\nfrom rl_tetris.tetromino_queue import TetrominoQueue\nfrom rl_tetris.randomizer import BagRandomizer\n\n# \ucef4\ud3ec\ub10c\ud2b8 \uc0dd\uc131\nboard = Board(height=20, width=10)\nqueue = TetrominoQueue(BagRandomizer())\ngame = Game(board, queue)\n\n# \uac8c\uc784 \uc2dc\uc791\ngame.reset()\nprint(f\"Current piece type: {game.current_piece.piece_type}\")\n</code></pre>"},{"location":"api/core/game/#_2","title":"\ud53c\uc2a4 \uc870\uc791","text":"<pre><code># \ud53c\uc2a4 \uc774\ub3d9\nif game.move_piece(dx=1, dy=0):\n    print(\"Moved right\")\n\nif game.move_piece(dx=0, dy=1):\n    print(\"Moved down\")\n\n# \ud53c\uc2a4 \ud68c\uc804\nif game.rotate_piece():\n    print(\"Rotated\")\n\n# \ud558\ub4dc \ub4dc\ub86d\nrows_dropped = game.hard_drop()\nprint(f\"Dropped {rows_dropped} rows\")\n</code></pre>"},{"location":"api/core/game/#_3","title":"\uac8c\uc784 \ub8e8\ud504","text":"<pre><code>game.reset()\n\nwhile not game.gameover:\n    # \ud53c\uc2a4 \uc870\uc791\n    game.move_piece(1, 0)\n    game.rotate_piece()\n\n    # \ud558\ub4dc \ub4dc\ub86d \ubc0f \uace0\uc815\n    game.hard_drop()\n    lines_cleared, is_game_over = game.lock_piece()\n\n    # \ubcf4\uc0c1 \uacc4\uc0b0\n    reward = game.calculate_reward(lines_cleared, is_game_over)\n\n    print(f\"Lines: {lines_cleared}\")\n    print(f\"Score: {game.score}\")\n    print(f\"Reward: {reward}\")\n\n    if is_game_over:\n        print(\"Game Over!\")\n        break\n</code></pre>"},{"location":"api/core/game/#_4","title":"\uc2a4\ucf54\uc5b4\ub9c1","text":"<pre><code># \uc904 \ud074\ub9ac\uc5b4\uc5d0 \ub530\ub978 \uc810\uc218\n# 1\uc904: 100\uc810\n# 2\uc904: 300\uc810\n# 3\uc904: 500\uc810\n# 4\uc904 (Tetris): 800\uc810\n\nlines_cleared, _ = game.lock_piece()\nprint(f\"Score: {game.score}\")\nprint(f\"Total lines: {game.cleared_lines}\")\n</code></pre>"},{"location":"api/core/game/#scoring-system","title":"Scoring System","text":"Lines Cleared Points 1 100 2 300 3 500 4 (Tetris) 800"},{"location":"api/core/game/#reward-system","title":"Reward System","text":"<p>\uac15\ud654\ud559\uc2b5\uc744 \uc704\ud55c \ubcf4\uc0c1:</p> <ul> <li>\uc904 \ud074\ub9ac\uc5b4: <code>lines_cleared\u00b2</code> (1\uc904=1, 2\uc904=4, 3\uc904=9, 4\uc904=16)</li> <li>\uac8c\uc784 \uc624\ubc84: -10</li> <li>\uc77c\ubc18 \uc774\ub3d9: 0</li> </ul>"},{"location":"api/core/game/#see-also","title":"See Also","text":"<ul> <li>Board - \ubcf4\ub4dc \uad00\ub9ac</li> <li>Piece - \ud53c\uc2a4 \uad00\ub9ac</li> <li>Tetris Environment - Gymnasium \ud658\uacbd</li> </ul>"},{"location":"api/core/piece/","title":"Piece","text":"<p>Piece \ud074\ub798\uc2a4\ub294 \ud14c\ud2b8\ub9ac\uc2a4 \ud53c\uc2a4(\ud14c\ud2b8\ub85c\ubbf8\ub178)\uc758 \ud615\ud0dc, \ud68c\uc804, \uc704\uce58\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.</p>"},{"location":"api/core/piece/#api-reference","title":"API Reference","text":""},{"location":"api/core/piece/#rl_tetris.core.piece.Piece","title":"Piece","text":"<pre><code>Piece(piece_type: int, x: int = 0, y: int = 0)\n</code></pre> <p>Represents a Tetris piece (tetromino).</p> <p>Responsibilities: - Store piece shape and type - Provide rotation operations - Manage piece position</p> <p>Initialize a new piece.</p> <p>Parameters:</p> Name Type Description Default <code>piece_type</code> <code>int</code> <p>Index of the piece type (0-6)</p> required <code>x</code> <code>int</code> <p>Initial column position</p> <code>0</code> <code>y</code> <code>int</code> <p>Initial row position</p> <code>0</code> Source code in <code>rl_tetris/core/piece.py</code> <pre><code>def __init__(self, piece_type: int, x: int = 0, y: int = 0):\n    \"\"\"\n    Initialize a new piece.\n\n    Args:\n        piece_type: Index of the piece type (0-6)\n        x: Initial column position\n        y: Initial row position\n    \"\"\"\n    if not 0 &lt;= piece_type &lt; len(self.SHAPES):\n        raise ValueError(f\"Invalid piece type: {piece_type}\")\n\n    self.piece_type = piece_type\n    self.shape = [row[:] for row in self.SHAPES[piece_type]]\n    self.x = x\n    self.y = y\n</code></pre>"},{"location":"api/core/piece/#rl_tetris.core.piece.Piece.rotate_clockwise","title":"rotate_clockwise","text":"<pre><code>rotate_clockwise() -&gt; None\n</code></pre> <p>Rotate the piece 90 degrees clockwise (modifies piece state).</p> Source code in <code>rl_tetris/core/piece.py</code> <pre><code>def rotate_clockwise(self) -&gt; None:\n    \"\"\"\n    Rotate the piece 90 degrees clockwise (modifies piece state).\n    \"\"\"\n    self.shape = self.get_rotated_clockwise(self.shape)\n</code></pre>"},{"location":"api/core/piece/#rl_tetris.core.piece.Piece.move","title":"move","text":"<pre><code>move(dx: int, dy: int) -&gt; None\n</code></pre> <p>Move the piece by the given offset.</p> <p>Parameters:</p> Name Type Description Default <code>dx</code> <code>int</code> <p>Change in x position</p> required <code>dy</code> <code>int</code> <p>Change in y position</p> required Source code in <code>rl_tetris/core/piece.py</code> <pre><code>def move(self, dx: int, dy: int) -&gt; None:\n    \"\"\"\n    Move the piece by the given offset.\n\n    Args:\n        dx: Change in x position\n        dy: Change in y position\n    \"\"\"\n    self.x += dx\n    self.y += dy\n</code></pre>"},{"location":"api/core/piece/#rl_tetris.core.piece.Piece.set_position","title":"set_position","text":"<pre><code>set_position(x: int, y: int) -&gt; None\n</code></pre> <p>Set the piece position.</p> <p>Parameters:</p> Name Type Description Default <code>x</code> <code>int</code> <p>New x position</p> required <code>y</code> <code>int</code> <p>New y position</p> required Source code in <code>rl_tetris/core/piece.py</code> <pre><code>def set_position(self, x: int, y: int) -&gt; None:\n    \"\"\"\n    Set the piece position.\n\n    Args:\n        x: New x position\n        y: New y position\n    \"\"\"\n    self.x = x\n    self.y = y\n</code></pre>"},{"location":"api/core/piece/#rl_tetris.core.piece.Piece.get_all_rotations","title":"get_all_rotations","text":"<pre><code>get_all_rotations() -&gt; List[List[List[int]]]\n</code></pre> <p>Get all unique rotations of the current piece.</p> <p>Returns:</p> Type Description <code>List[List[List[int]]]</code> <p>List of rotated shapes (up to 4 rotations)</p> Source code in <code>rl_tetris/core/piece.py</code> <pre><code>def get_all_rotations(self) -&gt; List[List[List[int]]]:\n    \"\"\"\n    Get all unique rotations of the current piece.\n\n    Returns:\n        List of rotated shapes (up to 4 rotations)\n    \"\"\"\n    rotations = []\n    current_shape = self.get_shape_copy()\n\n    for _ in range(4):\n        # Check if this rotation is unique\n        if current_shape not in rotations:\n            rotations.append([row[:] for row in current_shape])\n        current_shape = self.get_rotated_clockwise(current_shape)\n\n    return rotations\n</code></pre>"},{"location":"api/core/piece/#rl_tetris.core.piece.Piece.copy","title":"copy","text":"<pre><code>copy() -&gt; Piece\n</code></pre> <p>Create a copy of this piece.</p> <p>Returns:</p> Type Description <code>Piece</code> <p>New Piece instance with the same state</p> Source code in <code>rl_tetris/core/piece.py</code> <pre><code>def copy(self) -&gt; 'Piece':\n    \"\"\"\n    Create a copy of this piece.\n\n    Returns:\n        New Piece instance with the same state\n    \"\"\"\n    new_piece = Piece(self.piece_type, self.x, self.y)\n    new_piece.shape = self.get_shape_copy()\n    return new_piece\n</code></pre>"},{"location":"api/core/piece/#piece-types","title":"Piece Types","text":"Type Name Shape Rotations 0 I <code>\u2588\u2588\u2588\u2588</code> 2 1 O <code>\u2588\u2588</code><code>\u2588\u2588</code> 1 2 T <code>\u2588\u2588\u2588</code><code>\u2588</code> 4 3 S <code>\u2588\u2588</code><code>\u2588\u2588</code> 2 4 Z <code>\u2588\u2588</code><code>\u2588\u2588</code> 2 5 J <code>\u2588</code><code>\u2588\u2588\u2588</code> 4 6 L <code>\u2588</code><code>\u2588\u2588\u2588</code> 4"},{"location":"api/core/piece/#usage-examples","title":"Usage Examples","text":""},{"location":"api/core/piece/#_1","title":"\ud53c\uc2a4 \uc0dd\uc131 \ubc0f \ud68c\uc804","text":"<pre><code>from rl_tetris.core import Piece\n\n# T \ud53c\uc2a4 \uc0dd\uc131\npiece = Piece(piece_type=2)\nprint(f\"Initial position: ({piece.x}, {piece.y})\")\n\n# \ud68c\uc804\npiece.rotate_clockwise()\n\n# \ubaa8\ub4e0 \ud68c\uc804 \uc0c1\ud0dc \ud655\uc778\nrotations = piece.get_all_rotations()\nprint(f\"Total rotations: {len(rotations)}\")\n</code></pre>"},{"location":"api/core/piece/#_2","title":"\ud53c\uc2a4 \uc774\ub3d9","text":"<pre><code># \uc0c1\ub300 \uc774\ub3d9\npiece.move(dx=1, dy=0)  # \uc624\ub978\ucabd\uc73c\ub85c\npiece.move(dx=0, dy=1)  # \uc544\ub798\ub85c\n\n# \uc808\ub300 \uc704\uce58 \uc124\uc815\npiece.set_position(x=5, y=10)\n</code></pre>"},{"location":"api/core/piece/#_3","title":"\ud53c\uc2a4 \ubcf5\uc0ac","text":"<pre><code># \uc2dc\ubbac\ub808\uc774\uc158\uc744 \uc704\ud55c \ubcf5\uc0ac\noriginal = Piece(piece_type=0)\ncopy = original.copy()\n\ncopy.rotate_clockwise()\ncopy.move(1, 0)\n\n# \uc6d0\ubcf8\uc740 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc74c\nassert original.x != copy.x\n</code></pre>"},{"location":"api/core/piece/#see-also","title":"See Also","text":"<ul> <li>Board - \ubcf4\ub4dc \uad00\ub9ac</li> <li>Game - \uac8c\uc784 \ub85c\uc9c1</li> </ul>"},{"location":"api/features/extractors/","title":"Feature Extractors","text":"<p>\ud2b9\uc9d5 \ucd94\ucd9c \ud074\ub798\uc2a4\ub4e4\uc740 \ubcf4\ub4dc \uc0c1\ud0dc\uc5d0\uc11c \uba38\uc2e0\ub7ec\ub2dd\uc744 \uc704\ud55c \ud2b9\uc9d5\uc744 \ucd94\ucd9c\ud569\ub2c8\ub2e4.</p>"},{"location":"api/features/extractors/#boardfeatureextractor","title":"BoardFeatureExtractor","text":""},{"location":"api/features/extractors/#rl_tetris.features.extractors.BoardFeatureExtractor","title":"BoardFeatureExtractor","text":"<p>Extracts features from a Tetris board for use in learning algorithms.</p> <p>Features extracted: - Lines cleared (from action) - Number of holes - Bumpiness (variance in column heights) - Total height</p>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.BoardFeatureExtractor.extract_features","title":"extract_features  <code>staticmethod</code>","text":"<pre><code>extract_features(board: Board, lines_cleared: int = 0) -&gt; np.ndarray\n</code></pre> <p>Extract a feature vector from a board state.</p> <p>Parameters:</p> Name Type Description Default <code>board</code> <code>Board</code> <p>Board instance to extract features from</p> required <code>lines_cleared</code> <code>int</code> <p>Number of lines cleared (optional context)</p> <code>0</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>NumPy array of features: [lines_cleared, holes, bumpiness, height]</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef extract_features(\n    board: Board,\n    lines_cleared: int = 0\n) -&gt; np.ndarray:\n    \"\"\"\n    Extract a feature vector from a board state.\n\n    Args:\n        board: Board instance to extract features from\n        lines_cleared: Number of lines cleared (optional context)\n\n    Returns:\n        NumPy array of features: [lines_cleared, holes, bumpiness, height]\n    \"\"\"\n    holes = board.get_holes()\n    bumpiness, height = board.get_bumpiness_and_height()\n\n    features = np.array([\n        lines_cleared,\n        holes,\n        bumpiness,\n        height\n    ], dtype=np.float32)\n\n    return features\n</code></pre>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.BoardFeatureExtractor.extract_features_from_state","title":"extract_features_from_state  <code>staticmethod</code>","text":"<pre><code>extract_features_from_state(board_state: List[List[int]], lines_cleared: int = 0, board_height: int = 20, board_width: int = 10) -&gt; np.ndarray\n</code></pre> <p>Extract features from a raw board state (without Board instance).</p> <p>Parameters:</p> Name Type Description Default <code>board_state</code> <code>List[List[int]]</code> <p>2D list representing board state</p> required <code>lines_cleared</code> <code>int</code> <p>Number of lines cleared</p> <code>0</code> <code>board_height</code> <code>int</code> <p>Height of the board</p> <code>20</code> <code>board_width</code> <code>int</code> <p>Width of the board</p> <code>10</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>NumPy array of features</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef extract_features_from_state(\n    board_state: List[List[int]],\n    lines_cleared: int = 0,\n    board_height: int = 20,\n    board_width: int = 10\n) -&gt; np.ndarray:\n    \"\"\"\n    Extract features from a raw board state (without Board instance).\n\n    Args:\n        board_state: 2D list representing board state\n        lines_cleared: Number of lines cleared\n        board_height: Height of the board\n        board_width: Width of the board\n\n    Returns:\n        NumPy array of features\n    \"\"\"\n    # Create a temporary board instance\n    temp_board = Board(board_height, board_width)\n    temp_board.set_state(board_state)\n\n    return BoardFeatureExtractor.extract_features(temp_board, lines_cleared)\n</code></pre>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.BoardFeatureExtractor.get_feature_dim","title":"get_feature_dim  <code>staticmethod</code>","text":"<pre><code>get_feature_dim() -&gt; int\n</code></pre> <p>Get the dimensionality of the feature vector.</p> <p>Returns:</p> Type Description <code>int</code> <p>Number of features</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef get_feature_dim() -&gt; int:\n    \"\"\"\n    Get the dimensionality of the feature vector.\n\n    Returns:\n        Number of features\n    \"\"\"\n    return len(BoardFeatureExtractor.get_feature_names())\n</code></pre>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.BoardFeatureExtractor.get_feature_names","title":"get_feature_names  <code>staticmethod</code>","text":"<pre><code>get_feature_names() -&gt; List[str]\n</code></pre> <p>Get the names of features in the order they appear.</p> <p>Returns:</p> Type Description <code>List[str]</code> <p>List of feature names</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef get_feature_names() -&gt; List[str]:\n    \"\"\"\n    Get the names of features in the order they appear.\n\n    Returns:\n        List of feature names\n    \"\"\"\n    return [\n        \"lines_cleared\",\n        \"holes\",\n        \"bumpiness\",\n        \"total_height\"\n    ]\n</code></pre>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.BoardFeatureExtractor.normalize_features","title":"normalize_features  <code>staticmethod</code>","text":"<pre><code>normalize_features(features: np.ndarray, max_lines: int = 4, max_holes: int = 200, max_bumpiness: int = 200, max_height: int = 200) -&gt; np.ndarray\n</code></pre> <p>Normalize features to [0, 1] range.</p> <p>Parameters:</p> Name Type Description Default <code>features</code> <code>ndarray</code> <p>Feature vector to normalize</p> required <code>max_lines</code> <code>int</code> <p>Maximum lines that can be cleared at once</p> <code>4</code> <code>max_holes</code> <code>int</code> <p>Maximum expected holes</p> <code>200</code> <code>max_bumpiness</code> <code>int</code> <p>Maximum expected bumpiness</p> <code>200</code> <code>max_height</code> <code>int</code> <p>Maximum expected total height</p> <code>200</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Normalized feature vector</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef normalize_features(\n    features: np.ndarray,\n    max_lines: int = 4,\n    max_holes: int = 200,\n    max_bumpiness: int = 200,\n    max_height: int = 200\n) -&gt; np.ndarray:\n    \"\"\"\n    Normalize features to [0, 1] range.\n\n    Args:\n        features: Feature vector to normalize\n        max_lines: Maximum lines that can be cleared at once\n        max_holes: Maximum expected holes\n        max_bumpiness: Maximum expected bumpiness\n        max_height: Maximum expected total height\n\n    Returns:\n        Normalized feature vector\n    \"\"\"\n    normalized = features.copy()\n    max_values = np.array([max_lines, max_holes, max_bumpiness, max_height])\n\n    # Avoid division by zero\n    max_values = np.where(max_values == 0, 1, max_values)\n\n    normalized = normalized / max_values\n    normalized = np.clip(normalized, 0, 1)\n\n    return normalized\n</code></pre>"},{"location":"api/features/extractors/#advancedfeatureextractor","title":"AdvancedFeatureExtractor","text":""},{"location":"api/features/extractors/#rl_tetris.features.extractors.AdvancedFeatureExtractor","title":"AdvancedFeatureExtractor","text":"<p>               Bases: <code>BoardFeatureExtractor</code></p> <p>Extended feature extractor with additional metrics.</p>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.AdvancedFeatureExtractor.extract_advanced_features","title":"extract_advanced_features  <code>staticmethod</code>","text":"<pre><code>extract_advanced_features(board: Board, lines_cleared: int = 0) -&gt; np.ndarray\n</code></pre> <p>Extract an extended feature vector with additional metrics.</p> <p>Parameters:</p> Name Type Description Default <code>board</code> <code>Board</code> <p>Board instance</p> required <code>lines_cleared</code> <code>int</code> <p>Number of lines cleared</p> <code>0</code> <p>Returns:</p> Type Description <code>ndarray</code> <p>Extended feature vector</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef extract_advanced_features(board: Board, lines_cleared: int = 0) -&gt; np.ndarray:\n    \"\"\"\n    Extract an extended feature vector with additional metrics.\n\n    Args:\n        board: Board instance\n        lines_cleared: Number of lines cleared\n\n    Returns:\n        Extended feature vector\n    \"\"\"\n    # Get basic features\n    basic_features = BoardFeatureExtractor.extract_features(board, lines_cleared)\n\n    # Get additional features\n    column_heights = board.get_column_heights()\n    max_height = max(column_heights) if column_heights else 0\n    min_height = min(column_heights) if column_heights else 0\n    height_variance = np.var(column_heights) if column_heights else 0\n\n    # Count complete rows\n    complete_rows = sum(1 for i in range(board.height) if board.is_row_full(i))\n\n    # Calculate height-weighted holes\n    board_state = board.get_state()\n    weighted_holes = AdvancedFeatureExtractor._get_weighted_holes(board_state)\n\n    # Wells (gaps between columns)\n    wells = AdvancedFeatureExtractor._count_wells(column_heights)\n\n    advanced_features = np.array([\n        *basic_features,\n        max_height,\n        min_height,\n        height_variance,\n        complete_rows,\n        weighted_holes,\n        wells\n    ], dtype=np.float32)\n\n    return advanced_features\n</code></pre>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.AdvancedFeatureExtractor.get_feature_dim","title":"get_feature_dim  <code>staticmethod</code>","text":"<pre><code>get_feature_dim() -&gt; int\n</code></pre> <p>Get dimensionality of advanced features.</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef get_feature_dim() -&gt; int:\n    \"\"\"Get dimensionality of advanced features.\"\"\"\n    return len(AdvancedFeatureExtractor.get_feature_names())\n</code></pre>"},{"location":"api/features/extractors/#rl_tetris.features.extractors.AdvancedFeatureExtractor.get_feature_names","title":"get_feature_names  <code>staticmethod</code>","text":"<pre><code>get_feature_names() -&gt; List[str]\n</code></pre> <p>Get names of advanced features.</p> Source code in <code>rl_tetris/features/extractors.py</code> <pre><code>@staticmethod\ndef get_feature_names() -&gt; List[str]:\n    \"\"\"Get names of advanced features.\"\"\"\n    return [\n        \"lines_cleared\",\n        \"holes\",\n        \"bumpiness\",\n        \"total_height\",\n        \"max_height\",\n        \"min_height\",\n        \"height_variance\",\n        \"complete_rows\",\n        \"weighted_holes\",\n        \"wells\"\n    ]\n</code></pre>"},{"location":"api/features/extractors/#usage-examples","title":"Usage Examples","text":""},{"location":"api/features/extractors/#_1","title":"\uae30\ubcf8 \ud2b9\uc9d5 \ucd94\ucd9c","text":"<pre><code>from rl_tetris.core import Board\nfrom rl_tetris.features import BoardFeatureExtractor\n\nboard = Board(height=20, width=10)\n# ... \uac8c\uc784 \uc9c4\ud589 ...\n\n# \ud2b9\uc9d5 \ucd94\ucd9c\nfeatures = BoardFeatureExtractor.extract_features(board, lines_cleared=2)\nprint(features)  # [2, 5, 8, 15] - [lines, holes, bumpiness, height]\n\n# \ud2b9\uc9d5 \uc774\ub984\nnames = BoardFeatureExtractor.get_feature_names()\nprint(names)  # ['lines_cleared', 'holes', 'bumpiness', 'total_height']\n\n# \ud2b9\uc9d5 \ucc28\uc6d0\ndim = BoardFeatureExtractor.get_feature_dim()\nprint(dim)  # 4\n</code></pre>"},{"location":"api/features/extractors/#_2","title":"\uace0\uae09 \ud2b9\uc9d5 \ucd94\ucd9c","text":"<pre><code>from rl_tetris.features import AdvancedFeatureExtractor\n\n# \uace0\uae09 \ud2b9\uc9d5 \ucd94\ucd9c (10\uac1c \ud2b9\uc9d5)\nfeatures = AdvancedFeatureExtractor.extract_features(board, lines_cleared=2)\nprint(features.shape)  # (10,)\n\n# \ud2b9\uc9d5 \uc774\ub984\nnames = AdvancedFeatureExtractor.get_feature_names()\nprint(names)\n# ['lines_cleared', 'holes', 'bumpiness', 'total_height',\n#  'max_height', 'weighted_holes', 'row_transitions',\n#  'column_transitions', 'wells', 'hole_depth']\n</code></pre>"},{"location":"api/features/extractors/#_3","title":"\uc815\uaddc\ud654","text":"<pre><code># \ud2b9\uc9d5 \uc815\uaddc\ud654\nnormalized = BoardFeatureExtractor.normalize_features(features)\nprint(normalized)  # \uc815\uaddc\ud654\ub41c \uac12\ub4e4\n</code></pre>"},{"location":"api/features/extractors/#features-description","title":"Features Description","text":""},{"location":"api/features/extractors/#basic-features-4","title":"Basic Features (4)","text":"<ol> <li>lines_cleared: \ud074\ub9ac\uc5b4\ub41c \uc904 \uc218</li> <li>holes: \ube14\ub85d \uc544\ub798\uc758 \ube48 \uacf5\uac04 \uc218</li> <li>bumpiness: \uc778\uc811\ud55c \uc5f4 \uac04 \ub192\uc774 \ucc28\uc774\uc758 \ud569</li> <li>total_height: \ubaa8\ub4e0 \uc5f4 \ub192\uc774\uc758 \ud569</li> </ol>"},{"location":"api/features/extractors/#advanced-features-10","title":"Advanced Features (10)","text":"<p>\uae30\ubcf8 4\uac1c + \ucd94\uac00 6\uac1c:</p> <ol> <li>max_height: \uac00\uc7a5 \ub192\uc740 \uc5f4\uc758 \ub192\uc774</li> <li>weighted_holes: \uac00\uc911\uce58\uac00 \uc801\uc6a9\ub41c \uad6c\uba4d \uc218</li> <li>row_transitions: \ud589 \ub0b4 \ube14\ub85d \ubcc0\ud654 \uc218</li> <li>column_transitions: \uc5f4 \ub0b4 \ube14\ub85d \ubcc0\ud654 \uc218</li> <li>wells: \uc591\ucabd\uc774 \ub9c9\ud78c \ube48 \uacf5\uac04 \uc218</li> <li>hole_depth: \uad6c\uba4d\uc758 \ud3c9\uade0 \uae4a\uc774</li> </ol>"},{"location":"api/features/extractors/#custom-feature-extractor","title":"Custom Feature Extractor","text":"<p>\uc790\uc2e0\ub9cc\uc758 \ud2b9\uc9d5 \ucd94\ucd9c\uae30\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>import numpy as np\nfrom rl_tetris.core import Board\n\nclass CustomExtractor:\n    @staticmethod\n    def extract_features(board: Board, lines_cleared: int = 0):\n        heights = board.get_column_heights()\n        holes = board.get_holes()\n\n        # \ucee4\uc2a4\ud140 \ud2b9\uc9d5\n        avg_height = np.mean(heights)\n        max_height = max(heights)\n        height_variance = np.var(heights)\n\n        return np.array([\n            lines_cleared,\n            holes,\n            avg_height,\n            max_height,\n            height_variance\n        ], dtype=np.float32)\n\n# \uc0ac\uc6a9\nfeatures = CustomExtractor.extract_features(board, 2)\n</code></pre>"},{"location":"api/features/extractors/#see-also","title":"See Also","text":"<ul> <li>Board - \ubcf4\ub4dc \ud2b9\uc9d5 \uacc4\uc0b0</li> <li>GroupedFeaturesObservation - \ud2b9\uc9d5 \uae30\ubc18 \uad00\ucc30</li> </ul>"},{"location":"api/utils/queue/","title":"TetrominoQueue","text":"<p>TetrominoQueue\ub294 \ud53c\uc2a4 \uc0dd\uc131 \uc21c\uc11c\ub97c \uad00\ub9ac\ud558\uace0, Randomizer\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub2e4\uc74c \ud53c\uc2a4\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4.</p>"},{"location":"api/utils/queue/#api-reference","title":"API Reference","text":""},{"location":"api/utils/queue/#rl_tetris.tetromino_queue.TetrominoQueue","title":"TetrominoQueue","text":"<pre><code>TetrominoQueue(randomizer, size=1)\n</code></pre> <p>\ud14c\ud2b8\ub85c\ubbf8\ub178\ub97c \ubbf8\ub9ac \uc815\ud574\uc9c4 \ud06c\uae30\ub9cc\ud07c \ub79c\ub364\ud558\uac8c \ubf51\uc544\uc11c \uc800\uc7a5\ud558\ub294 \ud074\ub798\uc2a4</p> <p>Parameters:</p> Name Type Description Default <code>randomizer</code> <code>Randomizer</code> <p>\ud14c\ud2b8\ub85c\ubbf8\ub178\ub97c \ub79c\ub364\ud558\uac8c \ubf51\ub294 \uac1d\uccb4</p> required <code>size</code> <code>int</code> <p>\ubbf8\ub9ac \ubf51\uc544 \uc800\uc7a5\ud560 \ud14c\ud2b8\ub85c\ubbf8\ub178 \ud06c\uae30</p> <code>1</code> Source code in <code>rl_tetris/tetromino_queue.py</code> <pre><code>def __init__(self, randomizer, size=1):\n    self.size = size\n    self.randomizer = randomizer or RandRandomizer()\n    self.queue = deque([], maxlen=size)\n</code></pre>"},{"location":"api/utils/queue/#usage-examples","title":"Usage Examples","text":""},{"location":"api/utils/queue/#_1","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>from rl_tetris.tetromino_queue import TetrominoQueue\nfrom rl_tetris.randomizer import BagRandomizer\n\n# \ud050 \uc0dd\uc131\nqueue = TetrominoQueue(BagRandomizer())\n\n# \ub2e4\uc74c \ud53c\uc2a4 \ud655\uc778 (\uc81c\uac70\ud558\uc9c0 \uc54a\uc74c)\nnext_piece = queue.peek()\nprint(f\"Next piece: {next_piece}\")\n\n# \ud53c\uc2a4 \uac00\uc838\uc624\uae30 (\uc81c\uac70)\ncurrent_piece = queue.pop()\nprint(f\"Current piece: {current_piece}\")\n\n# \ub9ac\uc14b\nqueue.reset()\n</code></pre>"},{"location":"api/utils/queue/#randomizer","title":"Randomizer \ubcc0\uacbd","text":"<pre><code>from rl_tetris.randomizer import RandRandomizer\n\n# \ub2e4\ub978 randomizer \uc0ac\uc6a9\nqueue = TetrominoQueue(RandRandomizer())\n\n# \ub7f0\ud0c0\uc784\uc5d0 \ubcc0\uacbd\nqueue.randomizer = BagRandomizer()\nqueue.reset()\n</code></pre>"},{"location":"api/utils/queue/#game","title":"Game\uc5d0\uc11c \uc0ac\uc6a9","text":"<pre><code>from rl_tetris.core import Board, Game\nfrom rl_tetris.tetromino_queue import TetrominoQueue\nfrom rl_tetris.randomizer import BagRandomizer\n\nboard = Board(height=20, width=10)\nqueue = TetrominoQueue(BagRandomizer())\ngame = Game(board, queue)\n\n# \uac8c\uc784\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \ud050 \uc0ac\uc6a9\ngame.reset()  # \uccab \ud53c\uc2a4 \uc2a4\ud3f0\nprint(f\"Current piece: {game.current_piece.piece_type}\")\n\n# \ub2e4\uc74c \ud53c\uc2a4 \ubbf8\ub9ac\ubcf4\uae30\nprint(f\"Next piece: {queue.peek()}\")\n</code></pre>"},{"location":"api/utils/queue/#implementation-details","title":"Implementation Details","text":"<p>\ud050\ub294 2\uac1c\uc758 \ud53c\uc2a4\ub97c \ubbf8\ub9ac \uc0dd\uc131\ud558\uc5ec \ubcf4\uad00\ud569\ub2c8\ub2e4:</p> <pre><code>class TetrominoQueue:\n    def __init__(self, randomizer: Randomizer):\n        self.randomizer = randomizer\n        self._queue = [\n            randomizer.get_random(),\n            randomizer.get_random()\n        ]\n\n    def pop(self) -&gt; int:\n        # \uccab \ubc88\uc9f8 \ud53c\uc2a4\ub97c \ubc18\ud658\ud558\uace0, \uc0c8\ub85c\uc6b4 \ud53c\uc2a4\ub97c \ucd94\uac00\n        piece = self._queue.pop(0)\n        self._queue.append(self.randomizer.get_random())\n        return piece\n\n    def peek(self) -&gt; int:\n        # \uccab \ubc88\uc9f8 \ud53c\uc2a4\ub97c \ud655\uc778\ub9cc \ud568\n        return self._queue[0]\n</code></pre>"},{"location":"api/utils/queue/#see-also","title":"See Also","text":"<ul> <li>Randomizer - \ud53c\uc2a4 \uc0dd\uc131 \uc54c\uace0\ub9ac\uc998</li> <li>Game - \uac8c\uc784 \ub85c\uc9c1</li> </ul>"},{"location":"api/utils/randomizer/","title":"Randomizer","text":"<p>Randomizer \ud074\ub798\uc2a4\ub4e4\uc740 \ud14c\ud2b8\ub9ac\uc2a4 \ud53c\uc2a4\uc758 \uc0dd\uc131 \uc21c\uc11c\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4.</p>"},{"location":"api/utils/randomizer/#bagrandomizer","title":"BagRandomizer","text":"<p>\"7-bag\" \uc54c\uace0\ub9ac\uc998\uc744 \uc0ac\uc6a9\ud558\ub294 \ud45c\uc900 \ud14c\ud2b8\ub9ac\uc2a4 \ub79c\ub364\ud654\uc785\ub2c8\ub2e4.</p> <p>7\uac1c\uc758 \ubaa8\ub4e0 \ud53c\uc2a4\ub97c \uc11e\uc740 \uac00\ubc29\uc5d0\uc11c \ud558\ub098\uc529 \uaebc\ub0b4\uba70, \uac00\ubc29\uc774 \ube44\uba74 \ub2e4\uc2dc \ucc44\uc6c1\ub2c8\ub2e4.</p>"},{"location":"api/utils/randomizer/#api-reference","title":"API Reference","text":""},{"location":"api/utils/randomizer/#rl_tetris.randomizer.BagRandomizer","title":"BagRandomizer","text":"<pre><code>BagRandomizer(num_pieces=7)\n</code></pre> <p>               Bases: <code>Randomizer</code></p> <p>\ud14c\ud2b8\ub85c\ubbf8\ub178\ub97c \ub79c\ub364\ud558\uac8c \ubf51\uc9c0\ub9cc, \ud55c \ubc88\uc529 \ub2e4 \ubf51\uae30\uc804\uc5d0 \ubf51\uc740 \ud14c\ud2b8\ub85c\ubbf8\ub178\ub97c \ub2e4\uc2dc \ubf51\uc9c0 \uc54a\ub294 \ud074\ub798\uc2a4</p> Source code in <code>rl_tetris/randomizer.py</code> <pre><code>def __init__(self, num_pieces=7):\n    self.num_pieces = num_pieces\n    self.bag = list(range(self.num_pieces))\n    random.shuffle(self.bag)\n</code></pre>"},{"location":"api/utils/randomizer/#usage-example","title":"Usage Example","text":"<pre><code>from rl_tetris.randomizer import BagRandomizer\n\nrandomizer = BagRandomizer()\n\n# 14\uac1c\uc758 \ud53c\uc2a4 \uc0dd\uc131 (2\uac1c\uc758 \uc644\uc804\ud55c \uac00\ubc29)\npieces = [randomizer.get_random() for _ in range(14)]\nprint(pieces)\n# \uc608: [2, 0, 5, 1, 6, 3, 4, 1, 3, 5, 0, 2, 6, 4]\n# \uccab 7\uac1c\uc640 \ub2e4\uc74c 7\uac1c\ub294 \uac01\uac01 0-6\uc744 \ubaa8\ub450 \ud3ec\ud568\n</code></pre>"},{"location":"api/utils/randomizer/#characteristics","title":"Characteristics","text":"<ul> <li>\uacf5\uc815\uc131: \ubaa8\ub4e0 \ud53c\uc2a4\uac00 \uace0\ub974\uac8c \ub098\uc634</li> <li>\uc608\uce21 \uac00\ub2a5\uc131: \ucd5c\ub300 7\uac1c \ud6c4\uc5d0\ub294 \ud2b9\uc815 \ud53c\uc2a4\uac00 \ubc18\ub4dc\uc2dc \ub098\uc634</li> <li>\ud45c\uc900: \uacf5\uc2dd \ud14c\ud2b8\ub9ac\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ubc29\uc2dd</li> </ul>"},{"location":"api/utils/randomizer/#randrandomizer","title":"RandRandomizer","text":"<p>\uc644\uc804 \ub79c\ub364 \ubc29\uc2dd\uc73c\ub85c \ud53c\uc2a4\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p>"},{"location":"api/utils/randomizer/#api-reference_1","title":"API Reference","text":""},{"location":"api/utils/randomizer/#rl_tetris.randomizer.RandRandomizer","title":"RandRandomizer","text":"<pre><code>RandRandomizer(num_pieces=7)\n</code></pre> <p>               Bases: <code>Randomizer</code></p> <p>\ud14c\ud2b8\ub85c\ubbf8\ub178\ub97c \ub79c\ub364\ud558\uac8c \ubf51\ub294 \ud074\ub798\uc2a4</p> Source code in <code>rl_tetris/randomizer.py</code> <pre><code>def __init__(self, num_pieces=7):\n    self.num_pieces = num_pieces\n</code></pre>"},{"location":"api/utils/randomizer/#usage-example_1","title":"Usage Example","text":"<pre><code>from rl_tetris.randomizer import RandRandomizer\n\nrandomizer = RandRandomizer()\n\n# \uc644\uc804 \ub79c\ub364 \ud53c\uc2a4 \uc0dd\uc131\npieces = [randomizer.get_random() for _ in range(14)]\nprint(pieces)\n# \uc608: [0, 0, 3, 5, 0, 2, 1, 6, 0, 0, 4, 3, 2, 0]\n# \uc5b4\ub5a4 \ud53c\uc2a4\ub4e0 \ub098\uc62c \uc218 \uc788\uc74c\n</code></pre>"},{"location":"api/utils/randomizer/#characteristics_1","title":"Characteristics","text":"<ul> <li>\uc644\uc804 \ub79c\ub364: \uac01 \ud53c\uc2a4\uac00 1/7 \ud655\ub960</li> <li>\ubd88\uacf5\uc815: \uac19\uc740 \ud53c\uc2a4\uac00 \uc5f0\uc18d\uc73c\ub85c \ub098\uc62c \uc218 \uc788\uc74c</li> <li>\uace0\uc804: \ucd08\uae30 \ud14c\ud2b8\ub9ac\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub358 \ubc29\uc2dd</li> </ul>"},{"location":"api/utils/randomizer/#custom-randomizer","title":"Custom Randomizer","text":"<p>\uc790\uc2e0\ub9cc\uc758 \ub79c\ub364\ud654 \uc54c\uace0\ub9ac\uc998\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>from rl_tetris.randomizer import Randomizer\nimport random\n\nclass WeightedRandomizer(Randomizer):\n    \"\"\"\n    \uac00\uc911\uce58\uac00 \uc801\uc6a9\ub41c \ub79c\ub364 \ud53c\uc2a4 \uc0dd\uc131\n    \"\"\"\n    def __init__(self, weights=None):\n        super().__init__()\n        # \uac01 \ud53c\uc2a4\uc5d0 \ub300\ud55c \uac00\uc911\uce58 (\uae30\ubcf8: \uade0\ub4f1)\n        self.weights = weights or [1.0] * 7\n\n    def get_random(self) -&gt; int:\n        \"\"\"\n        \uac00\uc911\uce58\uc5d0 \ub530\ub77c \ud53c\uc2a4 \uc120\ud0dd\n        \"\"\"\n        return random.choices(range(7), weights=self.weights)[0]\n\n    def reset(self):\n        \"\"\"\n        \ud544\uc694\uc2dc \uc0c1\ud0dc \ub9ac\uc14b\n        \"\"\"\n        pass\n\n# \uc0ac\uc6a9 \uc608\uc2dc\n# I \ud53c\uc2a4(0)\ub97c \ub2e4\ub978 \ud53c\uc2a4\ubcf4\ub2e4 2\ubc30 \uc790\uc8fc \ub098\uc624\uac8c\nweights = [2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]\nrandomizer = WeightedRandomizer(weights)\n</code></pre>"},{"location":"api/utils/randomizer/#comparison","title":"Comparison","text":"Randomizer Distribution Use Case BagRandomizer Uniform (\uacf5\uc815) \ud45c\uc900 \uac8c\uc784, \ud559\uc2b5 RandRandomizer Random (\ubd88\uacf5\uc815) \uace0\uc804 \ubc29\uc2dd, \ubcc0\ud654 Custom Customizable \ud2b9\uc218 \uc5f0\uad6c, \uc2e4\ud5d8"},{"location":"api/utils/randomizer/#usage-in-environment","title":"Usage in Environment","text":"<pre><code>from rl_tetris.envs.tetris import Tetris\nfrom rl_tetris.randomizer import BagRandomizer, RandRandomizer\n\n# Bag randomizer \uc0ac\uc6a9 (\uae30\ubcf8)\nenv = Tetris()  # \uae30\ubcf8\uc801\uc73c\ub85c BagRandomizer\n\n# Rand randomizer \uc0ac\uc6a9\nfrom rl_tetris.tetromino_queue import TetrominoQueue\nenv = Tetris()\nenv.queue = TetrominoQueue(RandRandomizer())\n</code></pre>"},{"location":"api/utils/randomizer/#see-also","title":"See Also","text":"<ul> <li>TetrominoQueue - \ud53c\uc2a4 \ud050 \uad00\ub9ac</li> <li>Game - \uac8c\uc784 \ub85c\uc9c1</li> </ul>"},{"location":"api/wrappers/grouped/","title":"GroupedWrapper","text":"<p>GroupedWrapper\ub294 \uac00\ub2a5\ud55c \ubaa8\ub4e0 \ud53c\uc2a4 \ubc30\uce58\ub97c \uadf8\ub8f9\ud654\ud558\uc5ec \uc561\uc158 \uacf5\uac04\uc744 \ub2e8\uc21c\ud654\ud569\ub2c8\ub2e4.</p>"},{"location":"api/wrappers/grouped/#overview","title":"Overview","text":"<p>\uae30\ubcf8 Tetris \ud658\uacbd\uc740 6\uac1c\uc758 \uc6d0\uc790\uc801 \uc561\uc158(left, right, down, rotate, etc.)\uc744 \uc81c\uacf5\ud558\uc9c0\ub9cc, GroupedWrapper\ub294 \ud604\uc7ac \ud53c\uc2a4\ub85c \uac00\ub2a5\ud55c \ubaa8\ub4e0 \ucd5c\uc885 \ubc30\uce58 \uc704\uce58\ub97c \uc561\uc158\uc73c\ub85c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4, I \ud53c\uc2a4\uac00 \uc2a4\ud3f0\ub418\uba74: - \uc218\ud3c9 \ubc30\uce58: 10\uac1c \uc704\uce58 (x=0~9) - \uc218\uc9c1 \ubc30\uce58: 7\uac1c \uc704\uce58 (x=0~6) - \ucd1d 17\uac1c\uc758 \uadf8\ub8f9\ud654\ub41c \uc561\uc158</p>"},{"location":"api/wrappers/grouped/#api-reference","title":"API Reference","text":""},{"location":"api/wrappers/grouped/#rl_tetris.wrapper.Grouped.GroupedWrapper","title":"GroupedWrapper","text":"<pre><code>GroupedWrapper(env: Tetris, observation_wrapper=None)\n</code></pre> <p>               Bases: <code>Wrapper</code></p>"},{"location":"api/wrappers/grouped/#rl_tetris.wrapper.Grouped.GroupedWrapper.observation","title":"observation","text":"<pre><code>observation(observation)\n</code></pre> <p>\ud604\uc7ac \uc0c1\ud0dc\uc5d0\uc11c \uac00\ub2a5\ud55c \ubaa8\ub4e0 \uc5f4(x)\uc5d0\uc11c \uac00\ub2a5\ud55c \ubaa8\ub4e0 \ud68c\uc804(r)\uc5d0 \ub300\ud55c \ub2e4\uc74c \uc0c1\ud0dc\ub97c \ubc18\ud658\ud558\ub294 \uba54\uc11c\ub4dc</p>"},{"location":"api/wrappers/grouped/#usage-examples","title":"Usage Examples","text":""},{"location":"api/wrappers/grouped/#_1","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>import gymnasium as gym\nfrom rl_tetris.wrapper.Grouped import GroupedWrapper\nfrom rl_tetris.wrapper.Observation import GroupedFeaturesObservation\n\nenv = gym.make(\"RL-Tetris-v0\")\nenv = GroupedWrapper(env, observation_wrapper=GroupedFeaturesObservation(env))\n\nobs, info = env.reset()\n\ndone = False\nwhile not done:\n    # action_mask\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc720\ud6a8\ud55c \uc561\uc158 \uc120\ud0dd\n    valid_actions = np.where(obs[\"action_mask\"] == 1)[0]\n    action = np.random.choice(valid_actions)\n\n    obs, reward, terminated, truncated, info = env.step(action)\n    done = terminated or truncated\n</code></pre>"},{"location":"api/wrappers/grouped/#action-mask","title":"Action Mask \uc0ac\uc6a9","text":"<pre><code># \uc720\ud6a8\ud55c \uc561\uc158\ub9cc \uc120\ud0dd\naction = env.action_space.sample(obs[\"action_mask\"])\n\n# \ub610\ub294 \uc9c1\uc811 \ud544\ud130\ub9c1\nq_values = model(obs[\"features\"])\nq_values[obs[\"action_mask\"] == 0] = float('-inf')\naction = q_values.argmax()\n</code></pre>"},{"location":"api/wrappers/grouped/#grouped-actions","title":"Grouped Actions","text":"<p>\uac01 \uc561\uc158\uc740 <code>(x, rotation)</code> \uc870\ud569\uc744 \ub098\ud0c0\ub0c5\ub2c8\ub2e4:</p> <pre><code># Action 0: x=0, rotation=0\n# Action 1: x=1, rotation=0\n# Action 2: x=2, rotation=0\n# ...\n# Action 10: x=0, rotation=1\n# Action 11: x=1, rotation=1\n# ...\n</code></pre>"},{"location":"api/wrappers/grouped/#visualization","title":"Visualization","text":"<p>\uc704 \uc774\ubbf8\uc9c0\ub294 \ud604\uc7ac \ud53c\uc2a4\uac00 \uc0c1\ub2e8\uc5d0\uc11c \ubc30\uce58 \uac00\ub2a5\ud55c \uc704\uce58\ub4e4\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4. <code>(x, r)</code> \ud45c\uc2dc\ub294 \uac01\uac01 \uc704\uce58\uc640 \ud68c\uc804 \uc0c1\ud0dc\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.</p>"},{"location":"api/wrappers/grouped/#benefits","title":"Benefits","text":""},{"location":"api/wrappers/grouped/#_2","title":"\uc7a5\uc810","text":"<ul> <li>\uc561\uc158 \uacf5\uac04 \ub2e8\uc21c\ud654: \uc5ec\ub7ec \ub2e8\uacc4\uc758 \uc561\uc158\uc744 \ud558\ub098\ub85c \ud1b5\ud569</li> <li>\ud559\uc2b5 \ud6a8\uc728\uc131: \ub354 \uc801\uc740 \uc2a4\ud15d\uc73c\ub85c \uac8c\uc784 \uc644\ub8cc</li> <li>\uba85\ud655\ud55c \ubaa9\ud45c: \uac01 \uc561\uc158\uc774 \uba85\ud655\ud55c \uacb0\uacfc\ub97c \uac00\uc9d0</li> </ul>"},{"location":"api/wrappers/grouped/#_3","title":"\ub2e8\uc810","text":"<ul> <li>\uc720\uc5f0\uc131 \uac10\uc18c: \uc911\uac04 \ub2e8\uacc4 \uc81c\uc5b4 \ubd88\uac00</li> <li>\ub3d9\uc801 \uc561\uc158 \uacf5\uac04: \ud53c\uc2a4\ub9c8\ub2e4 \uac00\ub2a5\ud55c \uc561\uc158 \uc218\uac00 \ub2e4\ub984</li> </ul>"},{"location":"api/wrappers/grouped/#see-also","title":"See Also","text":"<ul> <li>ObservationWrapper - \uad00\ucc30 \ubcc0\ud658</li> <li>Tetris Environment - \uae30\ubcf8 \ud658\uacbd</li> </ul>"},{"location":"api/wrappers/observation/","title":"Observation Wrappers","text":"<p>Observation Wrapper\ub4e4\uc740 \ud658\uacbd\uc758 \uad00\ucc30 \ub370\uc774\ud130\ub97c \ubcc0\ud658\ud569\ub2c8\ub2e4.</p>"},{"location":"api/wrappers/observation/#groupedfeaturesobservation","title":"GroupedFeaturesObservation","text":"<p>\ubcf4\ub4dc \uc0c1\ud0dc\ub97c \ud2b9\uc9d5 \ubca1\ud130\ub85c \ubcc0\ud658\ud558\ub294 Wrapper\uc785\ub2c8\ub2e4.</p>"},{"location":"api/wrappers/observation/#api-reference","title":"API Reference","text":""},{"location":"api/wrappers/observation/#rl_tetris.wrapper.Observation.GroupedFeaturesObservation","title":"GroupedFeaturesObservation","text":"<pre><code>GroupedFeaturesObservation(env: Tetris)\n</code></pre> <p>               Bases: <code>ObservationWrapper</code></p>"},{"location":"api/wrappers/observation/#rl_tetris.wrapper.Observation.GroupedFeaturesObservation.extract_board_features","title":"extract_board_features","text":"<pre><code>extract_board_features(board)\n</code></pre> <p>\ud604\uc7ac \ubcf4\ub4dc \uc0c1\ud0dc\uc5d0 \ub300\ud55c \ud2b9\uc9d5(\uc9c0\uc6cc\uc9c4 \uc904, \uad6c\uba4d, \uc778\uc811\uc5f4 \ucc28\uc774 \ud569, \ub192\uc774 \ud569)\uc744 \ubc18\ud658\ud558\ub294 \uba54\uc11c\ub4dc</p>"},{"location":"api/wrappers/observation/#usage-example","title":"Usage Example","text":"<pre><code>import gymnasium as gym\nfrom rl_tetris.wrapper.Grouped import GroupedWrapper\nfrom rl_tetris.wrapper.Observation import GroupedFeaturesObservation\n\nenv = gym.make(\"RL-Tetris-v0\")\nenv = GroupedWrapper(env, observation_wrapper=GroupedFeaturesObservation(env))\n\nobs, info = env.reset()\n\n# obs \uad6c\uc870\nprint(obs.keys())  # dict_keys(['features', 'action_mask'])\nprint(obs['features'].shape)  # (N, 4) - N\uac1c \uc561\uc158, 4\uac1c \ud2b9\uc9d5\nprint(obs['action_mask'].shape)  # (N,) - N\uac1c \uc561\uc158\uc758 \uc720\ud6a8\uc131\n</code></pre>"},{"location":"api/wrappers/observation/#observation-structure","title":"Observation Structure","text":"<pre><code>{\n    \"features\": np.ndarray,  # (N, 4) - \uac01 \uc561\uc158\uc5d0 \ub300\ud55c \ud2b9\uc9d5\n    \"action_mask\": np.ndarray  # (N,) - \uc720\ud6a8\ud55c \uc561\uc158 \ub9c8\uc2a4\ud06c\n}\n</code></pre>"},{"location":"api/wrappers/observation/#features","title":"Features","text":"<p>\uac01 \uc561\uc158(\ud53c\uc2a4 \ubc30\uce58)\uc5d0 \ub300\ud574 4\uac1c\uc758 \ud2b9\uc9d5\uc744 \uc81c\uacf5:</p> <ol> <li>lines_cleared: \ud574\ub2f9 \ubc30\uce58\ub85c \ud074\ub9ac\uc5b4\ub418\ub294 \uc904 \uc218</li> <li>holes: \ubc30\uce58 \ud6c4 \ubcf4\ub4dc\uc758 \uad6c\uba4d \uc218</li> <li>bumpiness: \ubc30\uce58 \ud6c4 \ub192\uc774 \ud3b8\ucc28</li> <li>total_height: \ubc30\uce58 \ud6c4 \ucd1d \ub192\uc774</li> </ol>"},{"location":"api/wrappers/observation/#boardobservation","title":"BoardObservation","text":"<p>\ubcf4\ub4dc \uc0c1\ud0dc\ub97c numpy \ubc30\uc5f4\ub85c \ubc18\ud658\ud558\ub294 \uae30\ubcf8 Wrapper\uc785\ub2c8\ub2e4.</p>"},{"location":"api/wrappers/observation/#api-reference_1","title":"API Reference","text":""},{"location":"api/wrappers/observation/#rl_tetris.wrapper.Observation.BoardObservation","title":"BoardObservation","text":"<pre><code>BoardObservation(env: Tetris)\n</code></pre> <p>               Bases: <code>ObservationWrapper</code></p>"},{"location":"api/wrappers/observation/#usage-example_1","title":"Usage Example","text":"<pre><code>from rl_tetris.wrapper.Grouped import GroupedWrapper\nfrom rl_tetris.wrapper.Observation import BoardObservation\n\nenv = gym.make(\"RL-Tetris-v0\")\nenv = GroupedWrapper(env, observation_wrapper=BoardObservation(env))\n\nobs, info = env.reset()\n\n# obs \uad6c\uc870\nprint(obs.keys())  # dict_keys(['board', 'action_mask'])\nprint(obs['board'].shape)  # (N, 20, 10) - N\uac1c \uc561\uc158\uc5d0 \ub300\ud55c \ubcf4\ub4dc \uc0c1\ud0dc\nprint(obs['action_mask'].shape)  # (N,)\n</code></pre>"},{"location":"api/wrappers/observation/#custom-observation-wrapper","title":"Custom Observation Wrapper","text":"<p>\uc790\uc2e0\ub9cc\uc758 Observation Wrapper\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>from rl_tetris.wrapper.Observation import BaseObservationWrapper\nimport numpy as np\n\nclass CustomObservation(BaseObservationWrapper):\n    def get_observation(self, env):\n        \"\"\"\n        Custom observation \uc0dd\uc131\n        \"\"\"\n        states = []\n\n        for x, rotation in env.unwrapped.valid_placements:\n            # \ubcf4\ub4dc \uc2dc\ubbac\ub808\uc774\uc158\n            board_copy = env.unwrapped.board.copy()\n            piece_copy = env.unwrapped.game.current_piece.copy()\n\n            # \ud53c\uc2a4 \ud68c\uc804 \ubc0f \ubc30\uce58\n            for _ in range(rotation):\n                piece_copy.rotate_clockwise()\n\n            # \ud558\ub4dc \ub4dc\ub86d\n            y = 0\n            while not board_copy.check_collision(piece_copy, x, y+1):\n                y += 1\n\n            board_copy.place_piece(piece_copy, x, y)\n\n            # \ucee4\uc2a4\ud140 \ud2b9\uc9d5 \ucd94\ucd9c\n            custom_features = self.extract_custom_features(board_copy)\n            states.append(custom_features)\n\n        return {\n            \"custom_features\": np.array(states),\n            \"action_mask\": env.unwrapped.action_mask\n        }\n\n    def extract_custom_features(self, board):\n        # \uc5ec\uae30\uc5d0 \ucee4\uc2a4\ud140 \ud2b9\uc9d5 \ub85c\uc9c1 \uad6c\ud604\n        return np.array([...])\n</code></pre>"},{"location":"api/wrappers/observation/#feature-comparison","title":"Feature Comparison","text":"Wrapper Output Shape Features Use Case BoardObservation (N, 20, 10) Raw board states CNN \uae30\ubc18 \ud559\uc2b5 GroupedFeaturesObservation (N, 4) Engineered features \uc791\uc740 \ubaa8\ub378, \ube60\ub978 \ud559\uc2b5 Custom Variable Your choice \ud2b9\uc218\ud55c \uc694\uad6c\uc0ac\ud56d"},{"location":"api/wrappers/observation/#see-also","title":"See Also","text":"<ul> <li>GroupedWrapper - \uc561\uc158 \uadf8\ub8f9\ud654</li> <li>Feature Extractors - \ud2b9\uc9d5 \ucd94\ucd9c</li> </ul>"},{"location":"architecture/core-components/","title":"Core Components","text":"<p>RL-Tetris\uc758 \ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8\ub294 <code>rl_tetris/core/</code> \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc704\uce58\ud558\uba70, \uac01\uac01 \uba85\ud655\ud55c \ucc45\uc784\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"architecture/core-components/#component-responsibilities","title":"Component Responsibilities","text":"<pre><code>graph LR\n    subgraph \"Board \ucc45\uc784\"\n        B1[\uc0c1\ud0dc \uad00\ub9ac]\n        B2[\ucda9\ub3cc \uac10\uc9c0]\n        B3[\uc904 \ud074\ub9ac\uc5b4]\n        B4[\ud2b9\uc9d5 \uacc4\uc0b0&lt;br/&gt;holes, bumpiness, height]\n    end\n\n    subgraph \"Piece \ucc45\uc784\"\n        P1[\ud53c\uc2a4 \ud615\ud0dc \uad00\ub9ac]\n        P2[\ud68c\uc804 \ub85c\uc9c1]\n        P3[\uc704\uce58 \uad00\ub9ac]\n        P4[\ud53c\uc2a4 \ubcf5\uc0ac]\n    end\n\n    subgraph \"Game \ucc45\uc784\"\n        G1[\uac8c\uc784 \ud750\ub984 \uc81c\uc5b4]\n        G2[\ud53c\uc2a4 \uc2a4\ud3f0]\n        G3[\uc2a4\ucf54\uc5b4\ub9c1]\n        G4[\uac8c\uc784 \uc624\ubc84 \ucc98\ub9ac]\n    end\n\n    subgraph \"Tetris \ucc45\uc784\"\n        T1[Gymnasium \uc778\ud130\ud398\uc774\uc2a4]\n        T2[\ucef4\ud3ec\ub10c\ud2b8 \uc870\uc728]\n        T3[\ud558\uc704 \ud638\ud658\uc131]\n        T4[\ub80c\ub354\ub9c1 \uc870\uc728]\n    end\n\n    style B1 fill:#E3F2FD\n    style B2 fill:#E3F2FD\n    style B3 fill:#E3F2FD\n    style B4 fill:#E3F2FD\n    style P1 fill:#F3E5F5\n    style P2 fill:#F3E5F5\n    style P3 fill:#F3E5F5\n    style P4 fill:#F3E5F5\n    style G1 fill:#E8F5E9\n    style G2 fill:#E8F5E9\n    style G3 fill:#E8F5E9\n    style G4 fill:#E8F5E9\n    style T1 fill:#FFF3E0\n    style T2 fill:#FFF3E0\n    style T3 fill:#FFF3E0\n    style T4 fill:#FFF3E0</code></pre>"},{"location":"architecture/core-components/#board","title":"Board","text":"<p>\uc704\uce58: <code>rl_tetris/core/board.py</code></p> <p>Board \ud074\ub798\uc2a4\ub294 \ud14c\ud2b8\ub9ac\uc2a4 \uac8c\uc784 \ubcf4\ub4dc\uc758 \uc0c1\ud0dc\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.</p>"},{"location":"architecture/core-components/#_1","title":"\uc8fc\uc694 \uae30\ub2a5","text":""},{"location":"architecture/core-components/#1","title":"1. \uc0c1\ud0dc \uad00\ub9ac","text":"<pre><code>from rl_tetris.core import Board\n\nboard = Board(height=20, width=10)\nboard.reset()  # \ubcf4\ub4dc \ucd08\uae30\ud654\n\n# \uc0c1\ud0dc \uac00\uc838\uc624\uae30/\uc124\uc815\ud558\uae30\nstate = board.get_state()\nboard.set_state(state)\n</code></pre>"},{"location":"architecture/core-components/#2","title":"2. \ucda9\ub3cc \uac10\uc9c0","text":"<pre><code>from rl_tetris.core import Board, Piece\n\nboard = Board(height=20, width=10)\npiece = Piece(piece_type=0)  # I \ud53c\uc2a4\n\n# \ucda9\ub3cc \uac80\uc0ac\nis_collision = board.check_collision(piece, x=5, y=10)\n</code></pre>"},{"location":"architecture/core-components/#3","title":"3. \ud53c\uc2a4 \ubc30\uce58","text":"<pre><code># \ubcf4\ub4dc\uc5d0 \ud53c\uc2a4 \ubc30\uce58\nboard.place_piece(piece, x=5, y=18)\n</code></pre>"},{"location":"architecture/core-components/#4","title":"4. \uc904 \ud074\ub9ac\uc5b4","text":"<pre><code># \uac00\ub4dd \ucc2c \uc904 \uc81c\uac70 \ubc0f \uac1c\uc218 \ubc18\ud658\nlines_cleared = board.clear_full_rows()\nprint(f\"Cleared {lines_cleared} lines\")\n</code></pre>"},{"location":"architecture/core-components/#5","title":"5. \ud2b9\uc9d5 \uacc4\uc0b0","text":"<pre><code># \uad6c\uba4d \uac1c\uc218\nholes = board.get_holes()\n\n# \ub192\uc774 \ud3b8\ucc28\uc640 \ucd1d \ub192\uc774\nbumpiness, total_height = board.get_bumpiness_and_height()\n\n# \uac01 \uc5f4\uc758 \ub192\uc774\nheights = board.get_column_heights()\n</code></pre>"},{"location":"architecture/core-components/#_2","title":"\uc124\uacc4 \ud2b9\uc9d5","text":"<ul> <li>\uc21c\uc218 \ud568\uc218: \ub300\ubd80\ubd84\uc758 \uba54\uc11c\ub4dc\uac00 \ubd80\uc791\uc6a9 \uc5c6\uc774 \ub3d9\uc791</li> <li>\ud14c\uc2a4\ud2b8 \uac00\ub2a5: \uc0c1\ud0dc\ub97c \uc27d\uac8c \uc124\uc815/\uac00\uc838\uc62c \uc218 \uc788\uc5b4 \ud14c\uc2a4\ud2b8 \uc6a9\uc774</li> <li>\ud2b9\uc9d5 \ucd94\ucd9c: ML\uc744 \uc704\ud55c \ub2e4\uc591\ud55c \ubcf4\ub4dc \ud2b9\uc9d5 \uc81c\uacf5</li> </ul> <p>\u2192 Board API \ubb38\uc11c</p>"},{"location":"architecture/core-components/#piece","title":"Piece","text":"<p>\uc704\uce58: <code>rl_tetris/core/piece.py</code></p> <p>Piece \ud074\ub798\uc2a4\ub294 \ud14c\ud2b8\ub9ac\uc2a4 \ud53c\uc2a4(\ud14c\ud2b8\ub85c\ubbf8\ub178)\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.</p>"},{"location":"architecture/core-components/#7","title":"7\uac00\uc9c0 \ud53c\uc2a4 \ud0c0\uc785","text":"Type Name Shape 0 I <code>\u2588\u2588\u2588\u2588</code> 1 O <code>\u2588\u2588</code><code>\u2588\u2588</code> 2 T <code>\u2588\u2588\u2588</code><code>\u2588</code> 3 S <code>\u2588\u2588</code><code>\u2588\u2588</code> 4 Z <code>\u2588\u2588</code><code>\u2588\u2588</code> 5 J <code>\u2588</code><code>\u2588\u2588\u2588</code> 6 L <code>\u2588</code><code>\u2588\u2588\u2588</code>"},{"location":"architecture/core-components/#_3","title":"\uc8fc\uc694 \uae30\ub2a5","text":""},{"location":"architecture/core-components/#1_1","title":"1. \ud53c\uc2a4 \uc0dd\uc131","text":"<pre><code>from rl_tetris.core import Piece\n\n# I \ud53c\uc2a4 \uc0dd\uc131\ni_piece = Piece(piece_type=0)\n\n# T \ud53c\uc2a4 \uc0dd\uc131\nt_piece = Piece(piece_type=2)\n</code></pre>"},{"location":"architecture/core-components/#2_1","title":"2. \ud68c\uc804","text":"<pre><code># \uc2dc\uacc4\ubc29\ud5a5 \ud68c\uc804\npiece.rotate_clockwise()\n\n# \ubaa8\ub4e0 \ud68c\uc804 \uc0c1\ud0dc \uac00\uc838\uc624\uae30\nrotations = piece.get_all_rotations()\n# I \ud53c\uc2a4: 2\uac00\uc9c0 \ud68c\uc804, O \ud53c\uc2a4: 1\uac00\uc9c0, \ub098\uba38\uc9c0: 4\uac00\uc9c0\n</code></pre>"},{"location":"architecture/core-components/#3_1","title":"3. \uc774\ub3d9","text":"<pre><code># \uc0c1\ub300 \uc774\ub3d9\npiece.move(dx=1, dy=0)  # \uc624\ub978\ucabd\uc73c\ub85c\n\n# \uc808\ub300 \uc704\uce58 \uc124\uc815\npiece.set_position(x=5, y=10)\n</code></pre>"},{"location":"architecture/core-components/#4_1","title":"4. \ubcf5\uc0ac","text":"<pre><code># \ud53c\uc2a4 \ubcf5\uc0ac (\uc2dc\ubbac\ub808\uc774\uc158\uc5d0 \uc720\uc6a9)\ncopied_piece = piece.copy()\ncopied_piece.rotate_clockwise()  # \uc6d0\ubcf8\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n</code></pre>"},{"location":"architecture/core-components/#_4","title":"\uc124\uacc4 \ud2b9\uc9d5","text":"<ul> <li>\ubd88\ubcc0\uc131 \uc9c0\uc6d0: <code>copy()</code> \uba54\uc11c\ub4dc\ub85c \uc548\uc804\ud55c \ubcf5\uc0ac</li> <li>\ud68c\uc804 \ucd5c\uc801\ud654: \uac01 \ud53c\uc2a4 \ud0c0\uc785\ubcc4 \ud68c\uc804 \uc0c1\ud0dc \ubbf8\ub9ac \uc815\uc758</li> <li>\uac04\ub2e8\ud55c \uc778\ud130\ud398\uc774\uc2a4: \uc9c1\uad00\uc801\uc778 \uba54\uc11c\ub4dc\uba85</li> </ul> <p>\u2192 Piece API \ubb38\uc11c</p>"},{"location":"architecture/core-components/#game","title":"Game","text":"<p>\uc704\uce58: <code>rl_tetris/core/game.py</code></p> <p>Game \ud074\ub798\uc2a4\ub294 \uac8c\uc784\uc758 \uc804\uccb4 \ud750\ub984\uc744 \uc81c\uc5b4\ud569\ub2c8\ub2e4.</p>"},{"location":"architecture/core-components/#_5","title":"\uc8fc\uc694 \uae30\ub2a5","text":""},{"location":"architecture/core-components/#1_2","title":"1. \uac8c\uc784 \ucd08\uae30\ud654","text":"<pre><code>from rl_tetris.core import Board, Game\nfrom rl_tetris.tetromino_queue import TetrominoQueue\nfrom rl_tetris.randomizer import BagRandomizer\n\nboard = Board(height=20, width=10)\nqueue = TetrominoQueue(BagRandomizer())\ngame = Game(board, queue)\n\ngame.reset()\n</code></pre>"},{"location":"architecture/core-components/#2_2","title":"2. \ud53c\uc2a4 \uc870\uc791","text":"<pre><code># \ud53c\uc2a4 \uc774\ub3d9 (\uc131\uacf5 \uc2dc True \ubc18\ud658)\nmoved = game.move_piece(dx=1, dy=0)  # \uc624\ub978\ucabd\n\n# \ud53c\uc2a4 \ud68c\uc804\nrotated = game.rotate_piece()\n\n# \ud558\ub4dc \ub4dc\ub86d (\ub5a8\uc5b4\uc9c4 \uce78 \uc218 \ubc18\ud658)\nrows_dropped = game.hard_drop()\n</code></pre>"},{"location":"architecture/core-components/#3_2","title":"3. \ud53c\uc2a4 \uace0\uc815 \ubc0f \uc2a4\ud3f0","text":"<pre><code># \ud604\uc7ac \ud53c\uc2a4 \uace0\uc815\nlines_cleared, is_game_over = game.lock_piece()\n\nif is_game_over:\n    print(\"Game Over!\")\nelse:\n    # \uc0c8 \ud53c\uc2a4 \uc790\ub3d9 \uc2a4\ud3f0\ub428\n    print(f\"Cleared {lines_cleared} lines\")\n    print(f\"Current score: {game.score}\")\n</code></pre>"},{"location":"architecture/core-components/#4_2","title":"4. \uc2a4\ucf54\uc5b4\ub9c1","text":"<pre><code># \ubcf4\uc0c1 \uacc4\uc0b0\nreward = game.calculate_reward(lines_cleared=2, overflow=False)\n\n# \uc2a4\ucf54\uc5b4 \ud655\uc778\nprint(f\"Score: {game.score}\")\nprint(f\"Total cleared lines: {game.cleared_lines}\")\n</code></pre>"},{"location":"architecture/core-components/#_6","title":"\uac8c\uc784 \uc0c1\ud0dc","text":"<p>Game \ud074\ub798\uc2a4\ub294 \ub2e4\uc74c \uc0c1\ud0dc\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4:</p> <ul> <li><code>current_piece</code>: \ud604\uc7ac \ud53c\uc2a4</li> <li><code>score</code>: \ud604\uc7ac \uc810\uc218</li> <li><code>cleared_lines</code>: \ucd1d \ud074\ub9ac\uc5b4\ud55c \uc904 \uc218</li> <li><code>gameover</code>: \uac8c\uc784 \uc624\ubc84 \uc5ec\ubd80</li> </ul>"},{"location":"architecture/core-components/#_7","title":"\uc124\uacc4 \ud2b9\uc9d5","text":"<ul> <li>\uc758\uc874\uc131 \uc8fc\uc785: Board\uc640 Queue\ub97c \uc8fc\uc785\ubc1b\uc544 \ud14c\uc2a4\ud2b8 \uc6a9\uc774</li> <li>\uba85\ud655\ud55c \uc778\ud130\ud398\uc774\uc2a4: \uac01 \uc561\uc158\uc774 \uba85\ud655\ud55c \ubc18\ud658\uac12</li> <li>\ubcf4\uc0c1 \uc2dc\uc2a4\ud15c: \uac15\ud654\ud559\uc2b5\uc5d0 \ucd5c\uc801\ud654\ub41c \ubcf4\uc0c1 \uacc4\uc0b0</li> </ul> <p>\u2192 Game API \ubb38\uc11c</p>"},{"location":"architecture/core-components/#component-interaction","title":"Component Interaction","text":"<pre><code>classDiagram\n    class Board {\n        -List~List~int~~ _state\n        +reset()\n        +check_collision(piece, x, y) bool\n        +place_piece(piece, x, y)\n        +clear_full_rows() int\n        +get_holes() int\n        +get_bumpiness_and_height() tuple\n    }\n\n    class Piece {\n        +int piece_type\n        +List~List~int~~ shape\n        +int x, y\n        +rotate_clockwise()\n        +move(dx, dy)\n        +copy() Piece\n    }\n\n    class Game {\n        +Board board\n        +TetrominoQueue queue\n        +Piece current_piece\n        +int score\n        +reset()\n        +move_piece(dx, dy) bool\n        +rotate_piece() bool\n        +hard_drop() int\n        +lock_piece() tuple\n    }\n\n    Game --&gt; Board\n    Game --&gt; Piece</code></pre>"},{"location":"architecture/core-components/#usage-example","title":"Usage Example","text":"<p>\uc804\uccb4 \uc0ac\uc6a9 \uc608\uc81c:</p> <pre><code>from rl_tetris.core import Board, Game\nfrom rl_tetris.tetromino_queue import TetrominoQueue\nfrom rl_tetris.randomizer import BagRandomizer\n\n# \ucef4\ud3ec\ub10c\ud2b8 \uc0dd\uc131\nboard = Board(height=20, width=10)\nqueue = TetrominoQueue(BagRandomizer())\ngame = Game(board, queue)\n\n# \uac8c\uc784 \uc2dc\uc791\ngame.reset()\n\n# \uac8c\uc784 \ub8e8\ud504\nwhile not game.gameover:\n    # \ud53c\uc2a4 \uc870\uc791\n    game.move_piece(1, 0)   # \uc624\ub978\ucabd\n    game.rotate_piece()      # \ud68c\uc804\n\n    # \ud558\ub4dc \ub4dc\ub86d \ubc0f \uace0\uc815\n    rows_dropped = game.hard_drop()\n    lines_cleared, is_game_over = game.lock_piece()\n\n    # \ubcf4\uc0c1 \uacc4\uc0b0\n    reward = game.calculate_reward(lines_cleared, is_game_over)\n\n    print(f\"Lines: {lines_cleared}, Reward: {reward}, Score: {game.score}\")\n\n    if is_game_over:\n        break\n</code></pre>"},{"location":"architecture/core-components/#next-steps","title":"Next Steps","text":"<ul> <li>Data Flow - \ucef4\ud3ec\ub10c\ud2b8 \uac04 \ub370\uc774\ud130 \ud750\ub984</li> <li>API Reference - \uc790\uc138\ud55c API \ubb38\uc11c</li> </ul>"},{"location":"architecture/data-flow/","title":"Data Flow","text":"<p>\uc774 \ubb38\uc11c\ub294 RL-Tetris\uc5d0\uc11c \ub370\uc774\ud130\uac00 \uc5b4\ub5bb\uac8c \ud750\ub974\ub294\uc9c0 \uc124\uba85\ud569\ub2c8\ub2e4.</p>"},{"location":"architecture/data-flow/#environment-lifecycle","title":"Environment Lifecycle","text":"<pre><code>sequenceDiagram\n    participant Agent\n    participant Tetris\n    participant Game\n    participant Board\n    participant Piece\n    participant Queue\n\n    Agent-&gt;&gt;Tetris: reset()\n    Tetris-&gt;&gt;Game: reset()\n    Game-&gt;&gt;Board: reset()\n    Game-&gt;&gt;Queue: reset()\n    Game-&gt;&gt;Queue: pop()\n    Queue--&gt;&gt;Game: piece_type\n    Game-&gt;&gt;Piece: new Piece(type)\n    Game--&gt;&gt;Tetris: current_piece\n    Tetris--&gt;&gt;Agent: observation, info\n\n    Agent-&gt;&gt;Tetris: step(action)\n    Tetris-&gt;&gt;Game: move_piece() / rotate_piece()\n    Game-&gt;&gt;Board: check_collision()\n    Board--&gt;&gt;Game: is_valid\n    alt collision detected\n        Game-&gt;&gt;Piece: update position\n    end\n\n    alt piece locked\n        Game-&gt;&gt;Board: place_piece()\n        Game-&gt;&gt;Board: clear_full_rows()\n        Board--&gt;&gt;Game: lines_cleared\n        Game-&gt;&gt;Game: calculate_reward()\n        Game-&gt;&gt;Queue: pop()\n        Game-&gt;&gt;Piece: spawn new piece\n    end\n\n    Game--&gt;&gt;Tetris: reward, done\n    Tetris--&gt;&gt;Agent: obs, reward, terminated, truncated, info</code></pre>"},{"location":"architecture/data-flow/#reset-flow","title":"Reset Flow","text":"<p>\ud658\uacbd\uc744 \ucd08\uae30\ud654\ud560 \ub54c\uc758 \ub370\uc774\ud130 \ud750\ub984:</p>"},{"location":"architecture/data-flow/#1-agent-tetris","title":"1. Agent \u2192 Tetris","text":"<pre><code>obs, info = env.reset()\n</code></pre>"},{"location":"architecture/data-flow/#2-tetris-game","title":"2. Tetris \u2192 Game","text":"<pre><code>self.game.reset()\n</code></pre>"},{"location":"architecture/data-flow/#3-game-board-queue","title":"3. Game \u2192 Board, Queue","text":"<pre><code>self.board.reset()  # \ubcf4\ub4dc \ucd08\uae30\ud654\nself.queue.reset()  # \ud050 \ucd08\uae30\ud654\n</code></pre>"},{"location":"architecture/data-flow/#4-game-piece","title":"4. Game \u2192 Piece","text":"<pre><code>piece_type = self.queue.pop()\nself.current_piece = Piece(piece_type)\n</code></pre>"},{"location":"architecture/data-flow/#5-tetris-agent","title":"5. Tetris \u2192 Agent","text":"<pre><code>observation = self.board.get_state()\ninfo = {\"score\": 0, \"lines\": 0}\nreturn observation, info\n</code></pre>"},{"location":"architecture/data-flow/#step-flow","title":"Step Flow","text":"<p>\uc561\uc158\uc744 \uc2e4\ud589\ud560 \ub54c\uc758 \ub370\uc774\ud130 \ud750\ub984:</p>"},{"location":"architecture/data-flow/#1-moverotate-actions","title":"1. Move/Rotate Actions","text":"<pre><code># Agent \u2192 Tetris\nobs, reward, terminated, truncated, info = env.step(action)\n</code></pre>"},{"location":"architecture/data-flow/#move-leftright","title":"Move Left/Right","text":"<pre><code># Tetris \u2192 Game\nsuccess = self.game.move_piece(dx, dy)\n\n# Game \u2192 Board (collision check)\nif not self.board.check_collision(piece, new_x, new_y):\n    piece.move(dx, dy)\n    return True\nreturn False\n</code></pre>"},{"location":"architecture/data-flow/#rotate","title":"Rotate","text":"<pre><code># Tetris \u2192 Game\nsuccess = self.game.rotate_piece()\n\n# Game \u2192 Piece\npiece.rotate_clockwise()\n\n# Game \u2192 Board (collision check)\nif self.board.check_collision(rotated_piece, x, y):\n    piece.rotate_counterclockwise()  # \ub418\ub3cc\ub9ac\uae30\n    return False\nreturn True\n</code></pre>"},{"location":"architecture/data-flow/#2-hard-drop-action","title":"2. Hard Drop Action","text":"<pre><code># Tetris \u2192 Game\nrows_dropped = self.game.hard_drop()\n\n# Game \u2192 Board (\ubc18\ubcf5 \ucda9\ub3cc \uccb4\ud06c)\nwhile not self.board.check_collision(piece, x, y+1):\n    y += 1\n    rows_dropped += 1\n\npiece.set_position(x, y)\nreturn rows_dropped\n</code></pre>"},{"location":"architecture/data-flow/#3-lock-piece","title":"3. Lock Piece","text":"<p>\ud53c\uc2a4\uac00 \ubc14\ub2e5\uc5d0 \ub3c4\ub2ec\ud558\uac70\ub098 hard drop \ud6c4:</p> <pre><code># Game \u2192 Board\nself.board.place_piece(piece, x, y)\n\n# Board \u2192 Game\nlines_cleared = self.board.clear_full_rows()\n\n# Game \u2192 Game (scoring)\nself.score += self._calculate_score(lines_cleared)\nself.cleared_lines += lines_cleared\n\n# Game \u2192 Queue (new piece)\npiece_type = self.queue.pop()\nself.current_piece = Piece(piece_type)\n\n# Game \u2192 Board (game over check)\nif self.board.check_collision(self.current_piece, x, y):\n    self.gameover = True\n    return lines_cleared, True\nreturn lines_cleared, False\n</code></pre>"},{"location":"architecture/data-flow/#4-return-to-agent","title":"4. Return to Agent","text":"<pre><code># Tetris \u2192 Agent\nobservation = self.board.get_state()\nreward = self.game.calculate_reward(lines_cleared, is_game_over)\nterminated = is_game_over\ntruncated = False\ninfo = {\n    \"score\": self.game.score,\n    \"lines\": self.game.cleared_lines\n}\nreturn observation, reward, terminated, truncated, info\n</code></pre>"},{"location":"architecture/data-flow/#wrapper-flow","title":"Wrapper Flow","text":"<p>Wrapper\ub97c \uc0ac\uc6a9\ud560 \ub54c\uc758 \ub370\uc774\ud130 \ubcc0\ud658:</p>"},{"location":"architecture/data-flow/#groupedwrapper","title":"GroupedWrapper","text":"<pre><code>sequenceDiagram\n    participant Agent\n    participant Wrapper\n    participant Env\n    participant Board\n\n    Agent-&gt;&gt;Wrapper: step(action)\n    Wrapper-&gt;&gt;Wrapper: decode action to (x, rotation)\n    Wrapper-&gt;&gt;Env: simulate placement\n    Env-&gt;&gt;Board: place_piece(x, rotation)\n    Env-&gt;&gt;Board: clear_full_rows()\n    Board--&gt;&gt;Env: lines_cleared\n    Env--&gt;&gt;Wrapper: obs, reward, done\n    Wrapper-&gt;&gt;Wrapper: encode next grouped states\n    Wrapper--&gt;&gt;Agent: grouped_obs, reward, done</code></pre>"},{"location":"architecture/data-flow/#grouped-action-encoding","title":"Grouped Action Encoding","text":"<pre><code># Agent: \ub2e8\uc77c \uc561\uc158 (\uadf8\ub8f9\ud654\ub41c \uc0c1\ud0dc \uc778\ub371\uc2a4)\naction = 42\n\n# Wrapper: (x, rotation) \ud29c\ud50c\ub85c \ub514\ucf54\ub529\nx, rotation = self._decode_action(action)\n\n# Env: \uc2dc\ubbac\ub808\uc774\uc158\nfor _ in range(rotation):\n    piece.rotate_clockwise()\npiece.set_position(x, y)\nenv.hard_drop()\n</code></pre>"},{"location":"architecture/data-flow/#observationwrapper","title":"ObservationWrapper","text":"<pre><code>graph LR\n    A[Raw Observation&lt;br/&gt;Board State] --&gt; B[Wrapper]\n    B --&gt; C[Transformed Observation&lt;br/&gt;Features]\n\n    style A fill:#E3F2FD\n    style C fill:#C8E6C9</code></pre>"},{"location":"architecture/data-flow/#groupedfeaturesobservation","title":"GroupedFeaturesObservation","text":"<pre><code># Raw observation (board state)\nraw_obs = board.get_state()  # (20, 10) numpy array\n\n# Wrapper transformation\nfeatures = []\nfor x, rotation in valid_placements:\n    # \uc2dc\ubbac\ub808\uc774\uc158\n    simulated_board = board.copy()\n    simulated_board.place_piece(piece, x, rotation)\n    lines = simulated_board.clear_full_rows()\n\n    # \ud2b9\uc9d5 \ucd94\ucd9c\n    feature = BoardFeatureExtractor.extract_features(\n        simulated_board, lines\n    )\n    features.append(feature)\n\n# Transformed observation\ngrouped_obs = {\n    \"features\": np.array(features),  # (N, 4)\n    \"action_mask\": action_mask        # (N,)\n}\n</code></pre>"},{"location":"architecture/data-flow/#feature-extraction-flow","title":"Feature Extraction Flow","text":"<pre><code>graph TB\n    Board[Board State] --&gt; Extract[Feature Extractor]\n\n    Extract --&gt; F1[Lines Cleared]\n    Extract --&gt; F2[Holes]\n    Extract --&gt; F3[Bumpiness]\n    Extract --&gt; F4[Height]\n\n    F1 --&gt; Features[Feature Vector]\n    F2 --&gt; Features\n    F3 --&gt; Features\n    F4 --&gt; Features\n\n    Features --&gt; Agent[Agent/Model]\n\n    style Board fill:#2196F3\n    style Features fill:#FF9800\n    style Agent fill:#4CAF50</code></pre>"},{"location":"architecture/data-flow/#feature-calculation","title":"Feature Calculation","text":"<pre><code>from rl_tetris.features import BoardFeatureExtractor\n\n# \ubcf4\ub4dc\uc5d0\uc11c \ud2b9\uc9d5 \ucd94\ucd9c\nfeatures = BoardFeatureExtractor.extract_features(board, lines_cleared)\n\n# features = [lines_cleared, holes, bumpiness, total_height]\n</code></pre>"},{"location":"architecture/data-flow/#holes","title":"Holes","text":"<pre><code>def get_holes(self):\n    holes = 0\n    for x in range(self.width):\n        block_found = False\n        for y in range(self.height):\n            if self._state[y][x] != 0:\n                block_found = True\n            elif block_found:\n                holes += 1\n    return holes\n</code></pre>"},{"location":"architecture/data-flow/#bumpiness-height","title":"Bumpiness &amp; Height","text":"<pre><code>def get_bumpiness_and_height(self):\n    heights = self.get_column_heights()\n    bumpiness = sum(abs(heights[i] - heights[i+1])\n                   for i in range(len(heights)-1))\n    total_height = sum(heights)\n    return bumpiness, total_height\n</code></pre>"},{"location":"architecture/data-flow/#state-synchronization","title":"State Synchronization","text":"<p>Tetris \ud658\uacbd\uc740 \ud558\uc704 \ud638\ud658\uc131\uc744 \uc704\ud574 \uc0c1\ud0dc\ub97c \ub3d9\uae30\ud654\ud569\ub2c8\ub2e4:</p> <pre><code>def _sync_state_for_wrappers(self):\n    \"\"\"Wrapper \ud638\ud658\uc131\uc744 \uc704\ud55c \uc0c1\ud0dc \ub3d9\uae30\ud654\"\"\"\n    self.anchor = (self.game.current_piece.x, self.game.current_piece.y)\n    self.shape = self.game.current_piece.shape\n    self.board_with_piece = self.board.get_state()\n\n    # \ud604\uc7ac \ud53c\uc2a4\ub97c \ubcf4\ub4dc\uc5d0 \uc624\ubc84\ub808\uc774\n    piece = self.game.current_piece\n    for py, row in enumerate(piece.shape):\n        for px, cell in enumerate(row):\n            if cell != 0:\n                y, x = piece.y + py, piece.x + px\n                if 0 &lt;= y &lt; self.height and 0 &lt;= x &lt; self.width:\n                    self.board_with_piece[y][x] = cell\n</code></pre>"},{"location":"architecture/data-flow/#data-types","title":"Data Types","text":""},{"location":"architecture/data-flow/#observation-space","title":"Observation Space","text":"<pre><code># Basic environment\nobservation_space = Box(\n    low=0,\n    high=7,\n    shape=(20, 10),\n    dtype=np.int32\n)\n\n# GroupedFeaturesObservation\nobservation_space = Dict({\n    \"features\": Box(\n        low=-np.inf,\n        high=np.inf,\n        shape=(max_actions, 4),\n        dtype=np.float32\n    ),\n    \"action_mask\": Box(\n        low=0,\n        high=1,\n        shape=(max_actions,),\n        dtype=np.int8\n    )\n})\n</code></pre>"},{"location":"architecture/data-flow/#action-space","title":"Action Space","text":"<pre><code># Basic environment\naction_space = Discrete(6)\n# 0: left, 1: right, 2: down, 3: rotate_cw, 4: rotate_ccw, 5: hard_drop\n\n# GroupedWrapper\naction_space = Discrete(max_actions)\n# \uac01 \uc561\uc158\uc740 (x, rotation) \uc870\ud569\uc744 \ub098\ud0c0\ub0c4\n</code></pre>"},{"location":"architecture/data-flow/#next-steps","title":"Next Steps","text":"<ul> <li>Core Components - \uac01 \ucef4\ud3ec\ub10c\ud2b8 \uc0c1\uc138 \uc124\uba85</li> <li>API Reference - \uc790\uc138\ud55c API \ubb38\uc11c</li> </ul>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>RL-Tetris\ub294 \ubaa8\ub4c8\ud654\ub418\uace0 \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud55c \uc544\ud0a4\ud14d\ucc98\ub97c \uac16\ucd94\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uac01 \ucef4\ud3ec\ub10c\ud2b8\ub294 \ub2e8\uc77c \ucc45\uc784 \uc6d0\uce59(SRP)\uc744 \ub530\ub974\uba70, \uba85\ud655\ud558\uac8c \ubd84\ub9ac\ub41c \uad6c\uc870\ub85c \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4.</p>"},{"location":"architecture/overview/#_1","title":"\uc804\uccb4 \uc544\ud0a4\ud14d\ucc98","text":"<pre><code>graph TB\n    subgraph \"External\"\n        User[User/Agent]\n        Gym[Gymnasium API]\n    end\n\n    subgraph \"Environment Layer\"\n        Tetris[Tetris Environment&lt;br/&gt;rl_tetris/envs/tetris.py]\n        Wrapper1[GroupedWrapper]\n        Wrapper2[ObservationWrapper]\n    end\n\n    subgraph \"Core Components&lt;br/&gt;rl_tetris/core/\"\n        Game[Game&lt;br/&gt;\uac8c\uc784 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158]\n        Board[Board&lt;br/&gt;\ubcf4\ub4dc \uc0c1\ud0dc \uad00\ub9ac]\n        Piece[Piece&lt;br/&gt;\ud53c\uc2a4 \ud615\ud0dc/\ud68c\uc804]\n    end\n\n    subgraph \"Features&lt;br/&gt;rl_tetris/features/\"\n        Feature[BoardFeatureExtractor&lt;br/&gt;\ud2b9\uc9d5 \ucd94\ucd9c]\n        Advanced[AdvancedFeatureExtractor&lt;br/&gt;\uace0\uae09 \ud2b9\uc9d5]\n    end\n\n    subgraph \"Supporting Components\"\n        Renderer[Renderer&lt;br/&gt;\uc2dc\uac01\ud654]\n        Queue[TetrominoQueue&lt;br/&gt;\ud53c\uc2a4 \ud050]\n        Randomizer[Randomizer&lt;br/&gt;BagRandomizer/RandRandomizer]\n        GameState[GameStates&lt;br/&gt;\ub80c\ub354\ub9c1 \uc0c1\ud0dc]\n        Actions[GameActions&lt;br/&gt;\uc561\uc158 \uc815\uc758]\n    end\n\n    User --&gt; Gym\n    Gym --&gt; Wrapper1 &amp; Wrapper2\n    Wrapper1 &amp; Wrapper2 --&gt; Tetris\n\n    Tetris --&gt; Game\n    Tetris --&gt; Board\n    Tetris --&gt; Renderer\n\n    Game --&gt; Board\n    Game --&gt; Piece\n    Game --&gt; Queue\n\n    Queue --&gt; Randomizer\n\n    Feature --&gt; Board\n    Advanced --&gt; Feature\n\n    Renderer --&gt; GameState\n    Tetris --&gt; Actions\n\n    style Tetris fill:#4CAF50\n    style Game fill:#2196F3\n    style Board fill:#2196F3\n    style Piece fill:#2196F3\n    style Feature fill:#FF9800\n    style Advanced fill:#FF9800</code></pre>"},{"location":"architecture/overview/#layers","title":"Layers","text":""},{"location":"architecture/overview/#1-external-layer","title":"1. External Layer","text":"<p>\uc0ac\uc6a9\uc790/\uc5d0\uc774\uc804\ud2b8\uc640 Gymnasium API\uac00 \uc0c1\ud638\uc791\uc6a9\ud558\ub294 \ub808\uc774\uc5b4\uc785\ub2c8\ub2e4.</p>"},{"location":"architecture/overview/#2-environment-layer","title":"2. Environment Layer","text":"<p>Tetris \ud658\uacbd\uacfc \ub2e4\uc591\ud55c Wrapper\ub4e4\uc774 \uc704\uce58\ud569\ub2c8\ub2e4:</p> <ul> <li>Tetris: Gymnasium \uc778\ud130\ud398\uc774\uc2a4 \uad6c\ud604</li> <li>GroupedWrapper: \uac00\ub2a5\ud55c \ubaa8\ub4e0 \ud53c\uc2a4 \ubc30\uce58\ub97c \uadf8\ub8f9\ud654</li> <li>ObservationWrapper: \uad00\ucc30 \ub370\uc774\ud130 \ubcc0\ud658</li> </ul>"},{"location":"architecture/overview/#3-core-components","title":"3. Core Components","text":"<p>\ud575\uc2ec \uac8c\uc784 \ub85c\uc9c1\uc744 \ub2f4\ub2f9\ud569\ub2c8\ub2e4:</p> <ul> <li>Board: \ubcf4\ub4dc \uc0c1\ud0dc \uad00\ub9ac, \ucda9\ub3cc \uac10\uc9c0, \uc904 \ud074\ub9ac\uc5b4</li> <li>Piece: \ud53c\uc2a4 \ud615\ud0dc \ubc0f \ud68c\uc804 \ub85c\uc9c1</li> <li>Game: \uac8c\uc784 \ud750\ub984 \uc81c\uc5b4, \uc2a4\ucf54\uc5b4\ub9c1</li> </ul>"},{"location":"architecture/overview/#4-features","title":"4. Features","text":"<p>\uba38\uc2e0\ub7ec\ub2dd\uc744 \uc704\ud55c \ud2b9\uc9d5 \ucd94\ucd9c:</p> <ul> <li>BoardFeatureExtractor: \uae30\ubcf8 \ud2b9\uc9d5 (lines, holes, bumpiness, height)</li> <li>AdvancedFeatureExtractor: \uace0\uae09 \ud2b9\uc9d5 (weighted holes, wells \ub4f1)</li> </ul>"},{"location":"architecture/overview/#5-supporting-components","title":"5. Supporting Components","text":"<p>\ub80c\ub354\ub9c1, \ub79c\ub364\ud654 \ub4f1\uc744 \uc9c0\uc6d0:</p> <ul> <li>Renderer: \uac8c\uc784 \ud654\uba74 \ub80c\ub354\ub9c1</li> <li>TetrominoQueue: \ud53c\uc2a4 \ud050 \uad00\ub9ac</li> <li>Randomizer: \ud53c\uc2a4 \uc0dd\uc131 \uc54c\uace0\ub9ac\uc998</li> </ul>"},{"location":"architecture/overview/#design-principles","title":"Design Principles","text":""},{"location":"architecture/overview/#solid-principles","title":"SOLID Principles","text":""},{"location":"architecture/overview/#single-responsibility-principle-srp","title":"Single Responsibility Principle (SRP)","text":"<p>\uac01 \ud074\ub798\uc2a4\ub294 \ud558\ub098\uc758 \uba85\ud655\ud55c \ucc45\uc784\ub9cc \uac00\uc9d1\ub2c8\ub2e4:</p> <ul> <li>Board: \ubcf4\ub4dc \uc0c1\ud0dc\uc640 \uad00\ub828\ub41c \ubaa8\ub4e0 \uc791\uc5c5</li> <li>Piece: \ud53c\uc2a4\uc640 \uad00\ub828\ub41c \ubaa8\ub4e0 \uc791\uc5c5</li> <li>Game: \uac8c\uc784 \ub85c\uc9c1\uacfc \uad00\ub828\ub41c \ubaa8\ub4e0 \uc791\uc5c5</li> </ul>"},{"location":"architecture/overview/#openclosed-principle-ocp","title":"Open/Closed Principle (OCP)","text":"<p>\ud655\uc7a5\uc5d0\ub294 \uc5f4\ub824\uc788\uace0 \uc218\uc815\uc5d0\ub294 \ub2eb\ud600\uc788\uc2b5\ub2c8\ub2e4:</p> <ul> <li>\uc0c8\ub85c\uc6b4 \ud2b9\uc9d5 \ucd94\ucd9c\uae30 \ucd94\uac00 \uac00\ub2a5</li> <li>\uc0c8\ub85c\uc6b4 \ub79c\ub364\ud654 \uc54c\uace0\ub9ac\uc998 \ucd94\uac00 \uac00\ub2a5</li> </ul>"},{"location":"architecture/overview/#dependency-injection","title":"Dependency Injection","text":"<p>\ucef4\ud3ec\ub10c\ud2b8 \uac04 \ub290\uc2a8\ud55c \uacb0\ud569:</p> <pre><code># Board\uc640 Queue\ub97c Game\uc5d0 \uc8fc\uc785\ngame = Game(board, queue)\n\n# \ud14c\uc2a4\ud2b8 \uc2dc \ubaa8\ud0b9 \uc6a9\uc774\nmock_board = MockBoard()\ntest_game = Game(mock_board, mock_queue)\n</code></pre>"},{"location":"architecture/overview/#composition-over-inheritance","title":"Composition over Inheritance","text":"<p>Tetris \ud658\uacbd\uc740 \uc0c1\uc18d\uc774 \uc544\ub2cc \ucef4\ud3ec\uc9c0\uc158\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4:</p> <pre><code>class Tetris(gym.Env):\n    def __init__(self):\n        self.board = Board(height=20, width=10)\n        self.game = Game(self.board, queue)\n        self.renderer = Renderer()\n</code></pre>"},{"location":"architecture/overview/#directory-structure","title":"Directory Structure","text":"<pre><code>RL-Tetris/\n\u251c\u2500\u2500 rl_tetris/              # \uba54\uc778 \ud328\ud0a4\uc9c0\n\u2502   \u251c\u2500\u2500 core/              # \ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8\n\u2502   \u2502   \u251c\u2500\u2500 board.py       # Board \ud074\ub798\uc2a4\n\u2502   \u2502   \u251c\u2500\u2500 piece.py       # Piece \ud074\ub798\uc2a4\n\u2502   \u2502   \u251c\u2500\u2500 game.py        # Game \ud074\ub798\uc2a4\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 features/          # \ud2b9\uc9d5 \ucd94\ucd9c \ubaa8\ub4c8\n\u2502   \u2502   \u251c\u2500\u2500 extractors.py  # \ud2b9\uc9d5 \ucd94\ucd9c \ud074\ub798\uc2a4\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 envs/              # Gymnasium \ud658\uacbd\n\u2502   \u2502   \u2514\u2500\u2500 tetris.py      # Tetris \ud658\uacbd\n\u2502   \u251c\u2500\u2500 wrapper/           # \ud658\uacbd \ub798\ud37c\n\u2502   \u2502   \u251c\u2500\u2500 Grouped.py\n\u2502   \u2502   \u2514\u2500\u2500 Observation.py\n\u2502   \u251c\u2500\u2500 mapping/           # \uc561\uc158 \uc815\uc758\n\u2502   \u2502   \u2514\u2500\u2500 actions.py\n\u2502   \u251c\u2500\u2500 renderer.py        # \ub80c\ub354\ub9c1\n\u2502   \u251c\u2500\u2500 randomizer.py      # \ub79c\ub364\ud654\n\u2502   \u251c\u2500\u2500 tetromino_queue.py # \ud53c\uc2a4 \ud050\n\u2502   \u2514\u2500\u2500 game_state.py      # \uac8c\uc784 \uc0c1\ud0dc\n\u251c\u2500\u2500 tests/                 # \ud14c\uc2a4\ud2b8 \uc2a4\uc704\ud2b8\n\u2502   \u251c\u2500\u2500 test_board.py      # 28 tests\n\u2502   \u251c\u2500\u2500 test_piece.py      # 30 tests\n\u2502   \u251c\u2500\u2500 test_game.py       # 16 tests\n\u2502   \u251c\u2500\u2500 test_randomizer.py # 9 tests\n\u2502   \u251c\u2500\u2500 test_integration.py# 16 tests\n\u2502   \u251c\u2500\u2500 test_wrappers.py   # 25 tests\n\u2502   \u2514\u2500\u2500 test_envs.py\n\u2514\u2500\u2500 examples/              # \uc0ac\uc6a9 \uc608\uc81c\n    \u251c\u2500\u2500 random_env.py\n    \u251c\u2500\u2500 random_grouped_env.py\n    \u2514\u2500\u2500 train_grouped_model.py\n</code></pre>"},{"location":"architecture/overview/#before-vs-after","title":"Before vs After","text":"<p>\ub9ac\ud329\ud1a0\ub9c1\uc744 \ud1b5\ud55c \uac1c\uc120 \uc0ac\ud56d:</p> \ud56d\ubaa9 Before After \uad6c\uc870 \ub2e8\uc77c \ud30c\uc77c (344\uc904) \ubaa8\ub4c8\ud654\ub41c \ucef4\ud3ec\ub10c\ud2b8 \ucc45\uc784 \ubd84\ub9ac \ud63c\uc7ac\ub428 \uba85\ud655\ud55c \ub2e8\uc77c \ucc45\uc784 \ud14c\uc2a4\ud2b8 1\uac1c (placeholder) 124\uac1c (\ud3ec\uad04\uc801) \ud14c\uc2a4\ud2b8 \ucee4\ubc84\ub9ac\uc9c0 ~10% ~95% \ud2b9\uc9d5 \ucd94\ucd9c \ud658\uacbd \ub0b4 \ud63c\uc7ac \ub3c5\ub9bd \ubaa8\ub4c8 \uc7ac\uc0ac\uc6a9\uc131 \ub0ae\uc74c \ub192\uc74c \uc720\uc9c0\ubcf4\uc218\uc131 \uc5b4\ub824\uc6c0 \uc26c\uc6c0 \ud655\uc7a5\uc131 \uc81c\ud55c\uc801 \uc6b0\uc218 \ucf54\ub4dc \uc911\ubcf5 \uc788\uc74c \ucd5c\uc18c\ud654"},{"location":"architecture/overview/#benefits","title":"Benefits","text":""},{"location":"architecture/overview/#_2","title":"\u2705 \ubaa8\ub4c8\ud654","text":"<p>\uac01 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub3c5\ub9bd\uc801\uc73c\ub85c \ud14c\uc2a4\ud2b8 \ubc0f \uac1c\ubc1c \uac00\ub2a5</p>"},{"location":"architecture/overview/#_3","title":"\u2705 \ud14c\uc2a4\ud2b8 \uc6a9\uc774\uc131","text":"<p>Pure function\uacfc DI\ub85c 100% \ud14c\uc2a4\ud2b8 \uac00\ub2a5</p>"},{"location":"architecture/overview/#_4","title":"\u2705 \uc720\uc9c0\ubcf4\uc218\uc131","text":"<p>\uba85\ud655\ud55c \uad6c\uc870\ub85c \ubc84\uadf8 \uc218\uc815\uacfc \uae30\ub2a5 \ucd94\uac00\uac00 \uc26c\uc6c0</p>"},{"location":"architecture/overview/#_5","title":"\u2705 \ud655\uc7a5\uc131","text":"<p>\uc0c8\ub85c\uc6b4 \ud2b9\uc9d5, \ud53c\uc2a4 \ud0c0\uc785, \uac8c\uc784 \ubaa8\ub4dc \ucd94\uac00 \uc6a9\uc774</p>"},{"location":"architecture/overview/#_6","title":"\u2705 \ud558\uc704 \ud638\ud658\uc131","text":"<p>\uae30\uc874 wrapper\uc640 \uc608\uc81c \ucf54\ub4dc \uadf8\ub300\ub85c \uc791\ub3d9</p>"},{"location":"architecture/overview/#_7","title":"\u2705 \uc7ac\uc0ac\uc6a9\uc131","text":"<p>\uac01 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub2e4\ub978 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub3c4 \uc0ac\uc6a9 \uac00\ub2a5</p>"},{"location":"architecture/overview/#next-steps","title":"Next Steps","text":"<ul> <li>Core Components - \uac01 \ucef4\ud3ec\ub10c\ud2b8\uc758 \uc0c1\uc138 \uc124\uba85</li> <li>Data Flow - \ub370\uc774\ud130 \ud750\ub984 \uc774\ud574\ud558\uae30</li> <li>API Reference - \uc790\uc138\ud55c API \ubb38\uc11c</li> </ul>"},{"location":"getting-started/examples/","title":"Examples","text":"<p>RL-Tetris \uc800\uc7a5\uc18c\uc5d0\ub294 \uc5ec\ub7ec \uac00\uc9c0 \uc608\uc81c\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"getting-started/examples/#random-agent","title":"Random Agent","text":""},{"location":"getting-started/examples/#basic-random-agent","title":"Basic Random Agent","text":"<p>\uac00\uc7a5 \uae30\ubcf8\uc801\uc778 \ub79c\ub364 \uc5d0\uc774\uc804\ud2b8:</p> <pre><code># examples/random_env.py\nimport time\nimport gymnasium as gym\n\nenv = gym.make(\"RL-Tetris-v0\", render_mode=\"human\")\nobs, info = env.reset()\n\ndone = False\ntotal_reward = 0\n\nwhile not done:\n    env.render()\n    action = env.action_space.sample()\n    obs, reward, terminated, truncated, info = env.step(action)\n    total_reward += reward\n    done = terminated or truncated\n    time.sleep(0.05)\n\nprint(f\"Total Reward: {total_reward}\")\n</code></pre>"},{"location":"getting-started/examples/#grouped-random-agent","title":"Grouped Random Agent","text":"<p>GroupedWrapper\ub97c \uc0ac\uc6a9\ud55c \ub79c\ub364 \uc5d0\uc774\uc804\ud2b8:</p> <pre><code># examples/random_grouped_env.py\nimport time\nimport gymnasium as gym\nfrom rl_tetris.wrapper.Grouped import GroupedWrapper\nfrom rl_tetris.wrapper.Observation import GroupedFeaturesObservation\n\nenv = gym.make(\"RL-Tetris-v0\", render_mode=\"human\")\nenv = GroupedWrapper(env, observation_wrapper=GroupedFeaturesObservation(env))\n\nobs, info = env.reset()\ndone = False\n\nwhile not done:\n    env.render()\n    # action_mask\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc720\ud6a8\ud55c \uc561\uc158\ub9cc \uc120\ud0dd\n    action = env.action_space.sample(obs[\"action_mask\"])\n    obs, reward, terminated, truncated, info = env.step(action)\n    done = terminated or truncated\n    time.sleep(1)\n</code></pre>"},{"location":"getting-started/examples/#deep-q-learning","title":"Deep Q-Learning","text":""},{"location":"getting-started/examples/#dqn-training","title":"DQN Training","text":"<p>GroupedWrapper\uc640 \ud2b9\uc9d5 \uae30\ubc18 DQN \ud559\uc2b5:</p> <pre><code># examples/train_grouped_model.py\nimport torch\nimport torch.nn as nn\nimport gymnasium as gym\nfrom rl_tetris.wrapper.Grouped import GroupedWrapper\nfrom rl_tetris.wrapper.Observation import GroupedFeaturesObservation\n\nclass DQN(nn.Module):\n    def __init__(self, input_dim, output_dim=1):\n        super(DQN, self).__init__()\n        self.fc1 = nn.Linear(input_dim, 128)\n        self.fc2 = nn.Linear(128, 64)\n        self.fc3 = nn.Linear(64, output_dim)\n\n    def forward(self, x):\n        x = torch.relu(self.fc1(x))\n        x = torch.relu(self.fc2(x))\n        return self.fc3(x)\n\n# \ud658\uacbd \uc0dd\uc131\nenv = gym.make(\"RL-Tetris-v0\")\nenv = GroupedWrapper(env, observation_wrapper=GroupedFeaturesObservation(env))\n\n# \ubaa8\ub378 \ucd08\uae30\ud654\nmodel = DQN(input_dim=4)  # 4\uac1c\uc758 \ud2b9\uc9d5\noptimizer = torch.optim.Adam(model.parameters(), lr=1e-3)\n\n# \ud559\uc2b5 \ub8e8\ud504\nfor episode in range(1000):\n    obs, info = env.reset()\n    done = False\n    total_reward = 0\n\n    while not done:\n        # \ud2b9\uc9d5\uc744 \uc0ac\uc6a9\ud558\uc5ec Q\uac12 \uacc4\uc0b0\n        features = torch.FloatTensor(obs[\"features\"])\n        q_values = model(features).squeeze()\n\n        # action_mask\ub97c \uc801\uc6a9\ud558\uc5ec \uc720\ud6a8\ud55c \uc561\uc158 \uc120\ud0dd\n        q_values[obs[\"action_mask\"] == 0] = float('-inf')\n        action = q_values.argmax().item()\n\n        # \ud658\uacbd \uc2a4\ud15d\n        next_obs, reward, terminated, truncated, info = env.step(action)\n        total_reward += reward\n        done = terminated or truncated\n\n        # \ud559\uc2b5 \ub85c\uc9c1 (\uac04\ub2e8\ud55c \uc608\uc2dc)\n        # ... (\uc804\uccb4 \ucf54\ub4dc\ub294 examples/ \ud3f4\ub354 \ucc38\uc870)\n\n        obs = next_obs\n\n    print(f\"Episode {episode}: Reward = {total_reward}\")\n</code></pre>"},{"location":"getting-started/examples/#custom-feature-extractor","title":"Custom Feature Extractor","text":"<p>\uc790\uc2e0\ub9cc\uc758 \ud2b9\uc9d5 \ucd94\ucd9c\uae30\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>from rl_tetris.core import Board\nimport numpy as np\n\nclass CustomFeatureExtractor:\n    @staticmethod\n    def extract_features(board: Board, lines_cleared: int = 0):\n        \"\"\"\n        Custom features:\n        - Lines cleared\n        - Holes\n        - Bumpiness\n        - Max height\n        - Average height\n        \"\"\"\n        holes = board.get_holes()\n        bumpiness, total_height = board.get_bumpiness_and_height()\n        heights = board.get_column_heights()\n\n        return np.array([\n            lines_cleared,\n            holes,\n            bumpiness,\n            max(heights),\n            np.mean(heights)\n        ], dtype=np.float32)\n\n# \uc0ac\uc6a9 \uc608\uc2dc\nfrom rl_tetris.envs.tetris import Tetris\n\nenv = Tetris()\nobs, info = env.reset()\n\n# \ubcf4\ub4dc\uc5d0\uc11c \ud2b9\uc9d5 \ucd94\ucd9c\nfeatures = CustomFeatureExtractor.extract_features(env.board)\nprint(f\"Features: {features}\")\n</code></pre>"},{"location":"getting-started/examples/#direct-component-usage","title":"Direct Component Usage","text":"<p>\ucef4\ud3ec\ub10c\ud2b8\ub97c \uc9c1\uc811 \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>from rl_tetris.core import Board, Piece, Game\nfrom rl_tetris.tetromino_queue import TetrominoQueue\nfrom rl_tetris.randomizer import BagRandomizer\n\n# \ucef4\ud3ec\ub10c\ud2b8 \uc0dd\uc131\nboard = Board(height=20, width=10)\nqueue = TetrominoQueue(BagRandomizer())\ngame = Game(board, queue)\n\n# \uac8c\uc784 \uc2dc\uc791\ngame.reset()\n\n# \ud53c\uc2a4 \uc870\uc791\ngame.move_piece(1, 0)   # \uc624\ub978\ucabd\uc73c\ub85c\ngame.rotate_piece()      # \ud68c\uc804\nrows_dropped = game.hard_drop()  # \ud558\ub4dc \ub4dc\ub86d\n\n# \ud53c\uc2a4 \uace0\uc815 \ubc0f \uc904 \ud074\ub9ac\uc5b4\nlines_cleared, is_game_over = game.lock_piece()\n\nprint(f\"Lines cleared: {lines_cleared}\")\nprint(f\"Game over: {is_game_over}\")\nprint(f\"Score: {game.score}\")\n</code></pre>"},{"location":"getting-started/examples/#more-examples","title":"More Examples","text":"<p>\uc804\uccb4 \uc608\uc81c \ucf54\ub4dc\ub294 GitHub \uc800\uc7a5\uc18c\uc758 examples \ud3f4\ub354\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <ul> <li><code>random_env.py</code> - \uae30\ubcf8 \ub79c\ub364 \uc5d0\uc774\uc804\ud2b8</li> <li><code>random_grouped_env.py</code> - Grouped Wrapper \uc0ac\uc6a9 \uc608\uc81c</li> <li><code>train_grouped_model.py</code> - DQN \ud559\uc2b5 \uc804\uccb4 \uc608\uc81c</li> </ul>"},{"location":"getting-started/examples/#next-steps","title":"Next Steps","text":"<ul> <li>API Reference - \uc790\uc138\ud55c API \ubb38\uc11c</li> <li>Architecture - \ucef4\ud3ec\ub10c\ud2b8 \uc774\ud574\ud558\uae30</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10 or higher</li> <li>pip</li> </ul>"},{"location":"getting-started/installation/#install-from-pypi","title":"Install from PyPI","text":"<p>\uac00\uc7a5 \uac04\ub2e8\ud55c \ubc29\ubc95\uc740 PyPI\uc5d0\uc11c \uc9c1\uc811 \uc124\uce58\ud558\ub294 \uac83\uc785\ub2c8\ub2e4:</p> <pre><code>pip install rl-tetris\n</code></pre>"},{"location":"getting-started/installation/#install-from-source","title":"Install from Source","text":"<p>\uac1c\ubc1c \ubc84\uc804\uc744 \uc124\uce58\ud558\uac70\ub098 \uae30\uc5ec\ud558\ub824\uba74 \uc18c\uc2a4\uc5d0\uc11c \uc124\uce58\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code># \uc800\uc7a5\uc18c \ud074\ub860\ngit clone https://github.com/hot666666/RL-Tetris.git\ncd RL-Tetris\n\n# Poetry \uc124\uce58 (\uc544\uc9c1 \uc124\uce58\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0)\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# \uc758\uc874\uc131 \uc124\uce58\npoetry install\n\n# \uac1c\ubc1c \uc758\uc874\uc131 \ud3ec\ud568 \uc124\uce58\npoetry install --with dev\n\n# \uc608\uc81c \uc2e4\ud589\uc744 \uc704\ud55c \uc758\uc874\uc131 \ud3ec\ud568\npoetry install --with examples\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>\uc124\uce58\uac00 \uc81c\ub300\ub85c \ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\ub824\uba74:</p> <pre><code>import rl_tetris\nimport gymnasium as gym\n\n# \ud658\uacbd \uc0dd\uc131 \ud14c\uc2a4\ud2b8\nenv = gym.make(\"RL-Tetris-v0\")\nobs, info = env.reset()\nprint(\"Installation successful!\")\nprint(f\"Observation shape: {obs.shape}\")\n</code></pre> <p>\ucd9c\ub825 \uc608\uc2dc: <pre><code>Installation successful!\nObservation shape: (20, 10)\n</code></pre></p>"},{"location":"getting-started/installation/#dependencies","title":"Dependencies","text":"<p>RL-Tetris\uc758 \uc8fc\uc694 \uc758\uc874\uc131:</p> <ul> <li>numpy: \ubc30\uc5f4 \uc5f0\uc0b0</li> <li>opencv-python: \ub80c\ub354\ub9c1</li> <li>gymnasium: \uac15\ud654\ud559\uc2b5 \ud658\uacbd \uc778\ud130\ud398\uc774\uc2a4</li> </ul> <p>\uac1c\ubc1c \uc758\uc874\uc131:</p> <ul> <li>pytest: \ud14c\uc2a4\ud2b8 \ud504\ub808\uc784\uc6cc\ud06c</li> </ul> <p>\uc608\uc81c \uc758\uc874\uc131 (\uc120\ud0dd\uc0ac\ud56d):</p> <ul> <li>torch: \ub525\ub7ec\ub2dd \ubaa8\ub378</li> <li>tensorboard: \ud559\uc2b5 \ubaa8\ub2c8\ud130\ub9c1</li> <li>wandb: \uc2e4\ud5d8 \ucd94\uc801</li> </ul>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - \uccab \ubc88\uc9f8 \uc5d0\uc774\uc804\ud2b8 \ub9cc\ub4e4\uae30</li> <li>Examples - \ub354 \ub9ce\uc740 \uc608\uc81c \uc0b4\ud3b4\ubcf4\uae30</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>\uc774 \uac00\uc774\ub4dc\uc5d0\uc11c\ub294 RL-Tetris \ud658\uacbd\uc744 \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \ube60\ub974\uac8c \ubc30\uc6c1\ub2c8\ub2e4.</p>"},{"location":"getting-started/quick-start/#basic-environment","title":"Basic Environment","text":"<p>\uac00\uc7a5 \uae30\ubcf8\uc801\uc778 \uc0ac\uc6a9\ubc95:</p> <pre><code>import gymnasium as gym\n\n# \ud658\uacbd \uc0dd\uc131\nenv = gym.make(\"RL-Tetris-v0\")\n\n# \ud658\uacbd \ucd08\uae30\ud654\nobs, info = env.reset()\n\n# \uac8c\uc784 \ub8e8\ud504\ndone = False\ntotal_reward = 0\n\nwhile not done:\n    # \ub79c\ub364 \uc561\uc158 \uc120\ud0dd\n    action = env.action_space.sample()\n\n    # \uc561\uc158 \uc2e4\ud589\n    obs, reward, terminated, truncated, info = env.step(action)\n    total_reward += reward\n\n    done = terminated or truncated\n\nprint(f\"Game Over! Total reward: {total_reward}\")\n</code></pre>"},{"location":"getting-started/quick-start/#render-mode","title":"Render Mode","text":"<p>\uac8c\uc784 \ud654\uba74\uc744 \ubcf4\ub824\uba74 <code>render_mode</code>\ub97c \uc124\uc815\ud558\uc138\uc694:</p> <pre><code>import time\nimport gymnasium as gym\n\nenv = gym.make(\"RL-Tetris-v0\", render_mode=\"human\")\nobs, info = env.reset()\n\ndone = False\nwhile not done:\n    env.render()  # \ud654\uba74 \ub80c\ub354\ub9c1\n    action = env.action_space.sample()\n    obs, reward, terminated, truncated, info = env.step(action)\n    done = terminated or truncated\n    time.sleep(0.1)  # \uac8c\uc784 \uc18d\ub3c4 \uc870\uc808\n</code></pre>"},{"location":"getting-started/quick-start/#render-modes","title":"Render Modes","text":"<ul> <li><code>None</code>: \ub80c\ub354\ub9c1 \uc5c6\uc74c (\ud559\uc2b5 \uc2dc \ube60\ub978 \uc18d\ub3c4)</li> <li><code>\"human\"</code>: \uac8c\uc784 \ud654\uba74 \ud45c\uc2dc</li> <li><code>\"animate\"</code>: Hard Drop \uc560\ub2c8\uba54\uc774\uc158 \ud3ec\ud568</li> </ul>"},{"location":"getting-started/quick-start/#using-groupedwrapper","title":"Using GroupedWrapper","text":"<p>GroupedWrapper\ub294 \uac00\ub2a5\ud55c \ubaa8\ub4e0 \ud53c\uc2a4 \ubc30\uce58\ub97c \uadf8\ub8f9\ud654\ud558\uc5ec \uc81c\uacf5\ud569\ub2c8\ub2e4:</p> <pre><code>import gymnasium as gym\nfrom rl_tetris.wrapper.Grouped import GroupedWrapper\nfrom rl_tetris.wrapper.Observation import GroupedFeaturesObservation\n\n# \ud658\uacbd \uc0dd\uc131 \ubc0f \ub798\ud37c \uc801\uc6a9\nenv = gym.make(\"RL-Tetris-v0\", render_mode=\"human\")\nenv = GroupedWrapper(env, observation_wrapper=GroupedFeaturesObservation(env))\n\nobs, info = env.reset()\n\ndone = False\nwhile not done:\n    env.render()\n\n    # action_mask\ub97c \uc0ac\uc6a9\ud55c \uc720\ud6a8\ud55c \uc561\uc158 \uc120\ud0dd\n    action = env.action_space.sample(obs[\"action_mask\"])\n\n    obs, reward, terminated, truncated, info = env.step(action)\n    done = terminated or truncated\n</code></pre>"},{"location":"getting-started/quick-start/#observation-structure","title":"Observation Structure","text":"<p>GroupedFeaturesObservation\uc744 \uc0ac\uc6a9\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 observation\uc744 \ubc1b\uc2b5\ub2c8\ub2e4:</p> <pre><code>{\n    \"action_mask\": array([1, 1, 0, 1, ...]),  # \uc720\ud6a8\ud55c \uc561\uc158\n    \"features\": array([\n        [lines_cleared, holes, bumpiness, height],  # \uc561\uc158 0\uc758 \ud2b9\uc9d5\n        [lines_cleared, holes, bumpiness, height],  # \uc561\uc158 1\uc758 \ud2b9\uc9d5\n        ...\n    ])\n}\n</code></pre>"},{"location":"getting-started/quick-start/#actions","title":"Actions","text":"<p>RL-Tetris\ub294 6\uac00\uc9c0 \uc561\uc158\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4:</p> <pre><code>from rl_tetris.mapping.actions import GameActions\n\n# \uc561\uc158 \ud0c0\uc785:\n# - GameActions.move_left (0)\n# - GameActions.move_right (1)\n# - GameActions.move_down (2)\n# - GameActions.rotate_clockwise (3)\n# - GameActions.rotate_counterclockwise (4)\n# - GameActions.hard_drop (5)\n\nenv = gym.make(\"RL-Tetris-v0\")\nobs, info = env.reset()\n\n# \ud2b9\uc815 \uc561\uc158 \uc2e4\ud589\nobs, reward, terminated, truncated, info = env.step(GameActions.hard_drop)\n</code></pre>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Examples - \uc804\uccb4 \ud559\uc2b5 \uc608\uc81c \ubcf4\uae30</li> <li>API Reference - \uc790\uc138\ud55c API \ubb38\uc11c</li> <li>Architecture - \ub0b4\ubd80 \uad6c\uc870 \uc774\ud574\ud558\uae30</li> </ul>"}]}